{"version":3,"sources":["../src/pg/table-names.ts","../src/pg/row-mappers.ts","../src/pg/query-builder.ts","../src/pg/pg-tenant.repository.ts","../src/pg/pg-tenant-host.repository.ts","../src/pg/pg-group.repository.ts","../src/pg/pg-redirect.repository.ts","../src/pg/pg-redirect-log.repository.ts","../src/pg/pg-not-found-log.repository.ts","../src/pg/pg-storage-adapter.ts"],"sourcesContent":["export const TABLES = {\n  tenants: 'redirectforge_tenants',\n  tenantHosts: 'redirectforge_tenant_hosts',\n  groups: 'redirectforge_groups',\n  redirects: 'redirectforge_redirects',\n  redirectLogs: 'redirectforge_redirect_logs',\n  notFoundLogs: 'redirectforge_not_found_logs',\n} as const;\n\nexport const FUNCTIONS = {\n  getActiveRedirectsByTenant: 'redirectforge_get_active_redirects_by_tenant',\n  incrementRedirectHit: 'redirectforge_increment_redirect_hit',\n  deleteExpiredRedirectLogs: 'redirectforge_delete_expired_redirect_logs',\n  deleteExpiredNotFoundLogs: 'redirectforge_delete_expired_not_found_logs',\n  queryRedirectLogGroups: 'redirectforge_query_redirect_log_groups',\n  queryNotFoundLogGroups: 'redirectforge_query_not_found_log_groups',\n} as const;\n","import type {\n  Tenant,\n  TenantHost,\n  Group,\n  Redirect,\n  RedirectLog,\n  NotFoundLog,\n  SourceFlags,\n} from '../types/index.js';\nimport type { RedirectWithGroupPosition } from '../repositories/index.js';\n\nfunction parseDate(value: string | Date | null | undefined): Date | undefined {\n  if (!value) return undefined;\n  return value instanceof Date ? value : new Date(value);\n}\n\nfunction parseSourceFlags(value: unknown): SourceFlags {\n  if (typeof value === 'string') return JSON.parse(value) as SourceFlags;\n  return value as SourceFlags;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function toTenant(row: any): Tenant {\n  return {\n    id: row.id,\n    name: row.name,\n    status: row.status,\n  };\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function toTenantHost(row: any): TenantHost {\n  return {\n    id: row.id,\n    tenant_id: row.tenant_id,\n    hostname: row.hostname,\n    environment: row.environment ?? undefined,\n    status: row.status,\n  };\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function toGroup(row: any): Group {\n  return {\n    id: row.id,\n    tenant_id: row.tenant_id,\n    name: row.name,\n    status: row.status,\n    position: row.position,\n  };\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function toRedirect(row: any): Redirect {\n  return {\n    id: row.id,\n    group_id: row.group_id,\n    position: row.position,\n    title: row.title ?? undefined,\n    status: row.status,\n    source_url: row.source_url,\n    source_flags: parseSourceFlags(row.source_flags),\n    match_type: row.match_type,\n    match_value: row.match_value ?? undefined,\n    match_is_regex: row.match_is_regex,\n    target_url: row.target_url ?? undefined,\n    alternate_target_url: row.alternate_target_url ?? undefined,\n    action_type: row.action_type,\n    action_code: row.action_code,\n    random_targets: row.random_targets ?? [],\n    hit_count: row.hit_count,\n    last_hit_at: parseDate(row.last_hit_at),\n    log_excluded: row.log_excluded,\n  };\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function toRedirectWithGroupPosition(row: any): RedirectWithGroupPosition {\n  return {\n    ...toRedirect(row),\n    group_position: row.group_position,\n  };\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function toRedirectLog(row: any): RedirectLog {\n  return {\n    id: row.id,\n    tenant_id: row.tenant_id,\n    redirect_id: row.redirect_id ?? undefined,\n    created_at: row.created_at instanceof Date ? row.created_at : new Date(row.created_at),\n    source_url: row.source_url,\n    target_url: row.target_url ?? undefined,\n    domain: row.domain ?? undefined,\n    ip: row.ip ?? undefined,\n    http_code: row.http_code,\n    user_agent: row.user_agent ?? undefined,\n    referrer: row.referrer ?? undefined,\n    request_method: row.request_method ?? undefined,\n    request_headers: row.request_headers ?? undefined,\n    redirect_source: row.redirect_source ?? undefined,\n  };\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function toNotFoundLog(row: any): NotFoundLog {\n  return {\n    id: row.id,\n    tenant_id: row.tenant_id,\n    created_at: row.created_at instanceof Date ? row.created_at : new Date(row.created_at),\n    url: row.url,\n    domain: row.domain ?? undefined,\n    ip: row.ip ?? undefined,\n    user_agent: row.user_agent ?? undefined,\n    referrer: row.referrer ?? undefined,\n    request_method: row.request_method ?? undefined,\n    request_headers: row.request_headers ?? undefined,\n  };\n}\n","import type { LogFilter } from '../types/index.js';\nimport { RedirectForgeError } from '../types/index.js';\n\nconst SAFE_IDENTIFIER = /^[a-z_][a-z0-9_]*$/;\n\nfunction validateFieldName(field: string): void {\n  if (!SAFE_IDENTIFIER.test(field)) {\n    throw new RedirectForgeError(`Invalid field name: ${field}`);\n  }\n}\n\nexport function buildFilterClause(\n  filters: LogFilter[],\n  startParam: number,\n): { clause: string; values: unknown[]; nextParam: number } {\n  const conditions: string[] = [];\n  const values: unknown[] = [];\n  let idx = startParam;\n\n  for (const f of filters) {\n    validateFieldName(f.field);\n    const val = f.value instanceof Date ? f.value.toISOString() : f.value;\n\n    switch (f.operator) {\n      case 'eq':\n        conditions.push(`\"${f.field}\" = $${idx}`);\n        values.push(val);\n        idx++;\n        break;\n      case 'neq':\n        conditions.push(`\"${f.field}\" != $${idx}`);\n        values.push(val);\n        idx++;\n        break;\n      case 'contains':\n        conditions.push(`\"${f.field}\" ILIKE $${idx}`);\n        values.push(`%${val}%`);\n        idx++;\n        break;\n      case 'not_contains':\n        conditions.push(`\"${f.field}\" NOT ILIKE $${idx}`);\n        values.push(`%${val}%`);\n        idx++;\n        break;\n      case 'gt':\n        conditions.push(`\"${f.field}\" > $${idx}`);\n        values.push(val);\n        idx++;\n        break;\n      case 'gte':\n        conditions.push(`\"${f.field}\" >= $${idx}`);\n        values.push(val);\n        idx++;\n        break;\n      case 'lt':\n        conditions.push(`\"${f.field}\" < $${idx}`);\n        values.push(val);\n        idx++;\n        break;\n      case 'lte':\n        conditions.push(`\"${f.field}\" <= $${idx}`);\n        values.push(val);\n        idx++;\n        break;\n    }\n  }\n\n  return {\n    clause: conditions.length > 0 ? ' AND ' + conditions.join(' AND ') : '',\n    values,\n    nextParam: idx,\n  };\n}\n\nexport function buildSetClause(\n  data: Record<string, unknown>,\n  startParam: number,\n): { clause: string; values: unknown[]; nextParam: number } {\n  const keys = Object.keys(data);\n  const values = keys.map((k) => data[k]);\n  const clause = keys.map((k, i) => `\"${k}\" = $${startParam + i}`).join(', ');\n  return { clause, values, nextParam: startParam + keys.length };\n}\n","import type { Tenant } from '../types/index.js';\nimport type { TenantRepository } from '../repositories/index.js';\nimport { RedirectForgeError } from '../types/index.js';\nimport type { PgPool } from './pg-client.js';\nimport { TABLES } from './table-names.js';\nimport { toTenant } from './row-mappers.js';\nimport { buildSetClause } from './query-builder.js';\n\nconst T = TABLES.tenants;\n\nexport class PgTenantRepository implements TenantRepository {\n  constructor(private readonly pool: PgPool) {}\n\n  async findById(id: string): Promise<Tenant | undefined> {\n    const { rows } = await this.pool.query(\n      `SELECT * FROM ${T} WHERE id = $1`,\n      [id],\n    );\n    return rows[0] ? toTenant(rows[0]) : undefined;\n  }\n\n  async findAll(): Promise<Tenant[]> {\n    const { rows } = await this.pool.query(`SELECT * FROM ${T}`);\n    return rows.map(toTenant);\n  }\n\n  async create(input: Omit<Tenant, 'id'>): Promise<Tenant> {\n    const { rows } = await this.pool.query(\n      `INSERT INTO ${T} (name, status) VALUES ($1, $2) RETURNING *`,\n      [input.name, input.status],\n    );\n    if (!rows[0]) throw new RedirectForgeError('Failed to create tenant');\n    return toTenant(rows[0]);\n  }\n\n  async update(id: string, input: Partial<Omit<Tenant, 'id'>>): Promise<Tenant> {\n    const { clause, values, nextParam } = buildSetClause(input as Record<string, unknown>, 1);\n    if (!clause) {\n      const found = await this.findById(id);\n      if (!found) throw new RedirectForgeError(`Tenant not found: ${id}`);\n      return found;\n    }\n    values.push(id);\n    const { rows } = await this.pool.query(\n      `UPDATE ${T} SET ${clause} WHERE id = $${nextParam} RETURNING *`,\n      values,\n    );\n    if (!rows[0]) throw new RedirectForgeError(`Tenant not found: ${id}`);\n    return toTenant(rows[0]);\n  }\n\n  async delete(id: string): Promise<void> {\n    await this.pool.query(`DELETE FROM ${T} WHERE id = $1`, [id]);\n  }\n}\n","import type { TenantHost } from '../types/index.js';\nimport type { TenantHostRepository } from '../repositories/index.js';\nimport { RedirectForgeError } from '../types/index.js';\nimport type { PgPool } from './pg-client.js';\nimport { TABLES } from './table-names.js';\nimport { toTenantHost } from './row-mappers.js';\nimport { buildSetClause } from './query-builder.js';\n\nconst T = TABLES.tenantHosts;\n\nexport class PgTenantHostRepository implements TenantHostRepository {\n  constructor(private readonly pool: PgPool) {}\n\n  async findById(id: string): Promise<TenantHost | undefined> {\n    const { rows } = await this.pool.query(\n      `SELECT * FROM ${T} WHERE id = $1`,\n      [id],\n    );\n    return rows[0] ? toTenantHost(rows[0]) : undefined;\n  }\n\n  async findByHostname(hostname: string): Promise<TenantHost | undefined> {\n    const { rows } = await this.pool.query(\n      `SELECT * FROM ${T} WHERE hostname = $1`,\n      [hostname],\n    );\n    return rows[0] ? toTenantHost(rows[0]) : undefined;\n  }\n\n  async findByTenantId(tenantId: string): Promise<TenantHost[]> {\n    const { rows } = await this.pool.query(\n      `SELECT * FROM ${T} WHERE tenant_id = $1`,\n      [tenantId],\n    );\n    return rows.map(toTenantHost);\n  }\n\n  async create(input: Omit<TenantHost, 'id'>): Promise<TenantHost> {\n    const { rows } = await this.pool.query(\n      `INSERT INTO ${T} (tenant_id, hostname, environment, status)\n       VALUES ($1, $2, $3, $4) RETURNING *`,\n      [input.tenant_id, input.hostname, input.environment ?? null, input.status],\n    );\n    if (!rows[0]) throw new RedirectForgeError('Failed to create tenant host');\n    return toTenantHost(rows[0]);\n  }\n\n  async update(id: string, input: Partial<Omit<TenantHost, 'id'>>): Promise<TenantHost> {\n    const { clause, values, nextParam } = buildSetClause(input as Record<string, unknown>, 1);\n    if (!clause) {\n      const found = await this.findById(id);\n      if (!found) throw new RedirectForgeError(`Tenant host not found: ${id}`);\n      return found;\n    }\n    values.push(id);\n    const { rows } = await this.pool.query(\n      `UPDATE ${T} SET ${clause} WHERE id = $${nextParam} RETURNING *`,\n      values,\n    );\n    if (!rows[0]) throw new RedirectForgeError(`Tenant host not found: ${id}`);\n    return toTenantHost(rows[0]);\n  }\n\n  async delete(id: string): Promise<void> {\n    await this.pool.query(`DELETE FROM ${T} WHERE id = $1`, [id]);\n  }\n}\n","import type { Group } from '../types/index.js';\nimport type { GroupRepository } from '../repositories/index.js';\nimport { RedirectForgeError } from '../types/index.js';\nimport type { PgPool } from './pg-client.js';\nimport { TABLES } from './table-names.js';\nimport { toGroup } from './row-mappers.js';\nimport { buildSetClause } from './query-builder.js';\n\nconst T = TABLES.groups;\n\nexport class PgGroupRepository implements GroupRepository {\n  constructor(private readonly pool: PgPool) {}\n\n  async findById(id: string): Promise<Group | undefined> {\n    const { rows } = await this.pool.query(\n      `SELECT * FROM ${T} WHERE id = $1`,\n      [id],\n    );\n    return rows[0] ? toGroup(rows[0]) : undefined;\n  }\n\n  async findByTenantId(tenantId: string): Promise<Group[]> {\n    const { rows } = await this.pool.query(\n      `SELECT * FROM ${T} WHERE tenant_id = $1 ORDER BY position ASC`,\n      [tenantId],\n    );\n    return rows.map(toGroup);\n  }\n\n  async create(input: Omit<Group, 'id'>): Promise<Group> {\n    const { rows } = await this.pool.query(\n      `INSERT INTO ${T} (tenant_id, name, status, position)\n       VALUES ($1, $2, $3, $4) RETURNING *`,\n      [input.tenant_id, input.name, input.status, input.position],\n    );\n    if (!rows[0]) throw new RedirectForgeError('Failed to create group');\n    return toGroup(rows[0]);\n  }\n\n  async update(id: string, input: Partial<Omit<Group, 'id'>>): Promise<Group> {\n    const { clause, values, nextParam } = buildSetClause(input as Record<string, unknown>, 1);\n    if (!clause) {\n      const found = await this.findById(id);\n      if (!found) throw new RedirectForgeError(`Group not found: ${id}`);\n      return found;\n    }\n    values.push(id);\n    const { rows } = await this.pool.query(\n      `UPDATE ${T} SET ${clause} WHERE id = $${nextParam} RETURNING *`,\n      values,\n    );\n    if (!rows[0]) throw new RedirectForgeError(`Group not found: ${id}`);\n    return toGroup(rows[0]);\n  }\n\n  async delete(id: string): Promise<void> {\n    await this.pool.query(`DELETE FROM ${T} WHERE id = $1`, [id]);\n  }\n\n  async countByTenantId(tenantId: string): Promise<number> {\n    const { rows } = await this.pool.query(\n      `SELECT count(*)::int AS cnt FROM ${T} WHERE tenant_id = $1`,\n      [tenantId],\n    );\n    return rows[0]?.cnt ?? 0;\n  }\n}\n","import type { Redirect } from '../types/index.js';\nimport type { RedirectRepository, RedirectWithGroupPosition } from '../repositories/index.js';\nimport { RedirectForgeError } from '../types/index.js';\nimport type { PgPool } from './pg-client.js';\nimport { TABLES, FUNCTIONS } from './table-names.js';\nimport { toRedirect, toRedirectWithGroupPosition } from './row-mappers.js';\n\nconst T = TABLES.redirects;\n\nconst COLUMNS = [\n  'group_id', 'position', 'title', 'status', 'source_url', 'source_flags',\n  'match_type', 'match_value', 'match_is_regex', 'target_url', 'alternate_target_url',\n  'action_type', 'action_code', 'random_targets', 'hit_count', 'last_hit_at', 'log_excluded',\n] as const;\n\nfunction serializeRow(input: Omit<Redirect, 'id'>): unknown[] {\n  return [\n    input.group_id,\n    input.position,\n    input.title ?? null,\n    input.status,\n    input.source_url,\n    JSON.stringify(input.source_flags),\n    input.match_type,\n    input.match_value ?? null,\n    input.match_is_regex,\n    input.target_url ?? null,\n    input.alternate_target_url ?? null,\n    input.action_type,\n    input.action_code,\n    input.random_targets,\n    input.hit_count,\n    input.last_hit_at?.toISOString() ?? null,\n    input.log_excluded,\n  ];\n}\n\nfunction serializePartial(input: Partial<Omit<Redirect, 'id'>>): Record<string, unknown> {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const row: Record<string, any> = {};\n  const src = input as Record<string, unknown>;\n  for (const key of Object.keys(src)) {\n    if (key === 'source_flags') {\n      row[key] = JSON.stringify(src[key]);\n    } else if (key === 'last_hit_at') {\n      const v = src[key] as Date | undefined;\n      row[key] = v?.toISOString() ?? null;\n    } else {\n      row[key] = src[key] ?? null;\n    }\n  }\n  return row;\n}\n\nexport class PgRedirectRepository implements RedirectRepository {\n  constructor(private readonly pool: PgPool) {}\n\n  async findById(id: string): Promise<Redirect | undefined> {\n    const { rows } = await this.pool.query(\n      `SELECT * FROM ${T} WHERE id = $1`,\n      [id],\n    );\n    return rows[0] ? toRedirect(rows[0]) : undefined;\n  }\n\n  async findByGroupId(groupId: string): Promise<Redirect[]> {\n    const { rows } = await this.pool.query(\n      `SELECT * FROM ${T} WHERE group_id = $1 ORDER BY position ASC`,\n      [groupId],\n    );\n    return rows.map(toRedirect);\n  }\n\n  async findActiveByTenantId(tenantId: string): Promise<RedirectWithGroupPosition[]> {\n    const { rows } = await this.pool.query(\n      `SELECT * FROM ${FUNCTIONS.getActiveRedirectsByTenant}($1)`,\n      [tenantId],\n    );\n    return rows.map(toRedirectWithGroupPosition);\n  }\n\n  async create(input: Omit<Redirect, 'id'>): Promise<Redirect> {\n    const colList = COLUMNS.map((c) => `\"${c}\"`).join(', ');\n    const placeholders = COLUMNS.map((_, i) => `$${i + 1}`).join(', ');\n    const { rows } = await this.pool.query(\n      `INSERT INTO ${T} (${colList}) VALUES (${placeholders}) RETURNING *`,\n      serializeRow(input),\n    );\n    if (!rows[0]) throw new RedirectForgeError('Failed to create redirect');\n    return toRedirect(rows[0]);\n  }\n\n  async createMany(inputs: Omit<Redirect, 'id'>[]): Promise<Redirect[]> {\n    if (inputs.length === 0) return [];\n    const colList = COLUMNS.map((c) => `\"${c}\"`).join(', ');\n    const allValues: unknown[] = [];\n    const valueTuples: string[] = [];\n\n    for (let i = 0; i < inputs.length; i++) {\n      const offset = i * COLUMNS.length;\n      const placeholders = COLUMNS.map((_, j) => `$${offset + j + 1}`).join(', ');\n      valueTuples.push(`(${placeholders})`);\n      allValues.push(...serializeRow(inputs[i]));\n    }\n\n    const { rows } = await this.pool.query(\n      `INSERT INTO ${T} (${colList}) VALUES ${valueTuples.join(', ')} RETURNING *`,\n      allValues,\n    );\n    return rows.map(toRedirect);\n  }\n\n  async update(id: string, input: Partial<Omit<Redirect, 'id'>>): Promise<Redirect> {\n    const data = serializePartial(input);\n    const keys = Object.keys(data);\n    if (keys.length === 0) {\n      const found = await this.findById(id);\n      if (!found) throw new RedirectForgeError(`Redirect not found: ${id}`);\n      return found;\n    }\n    const setClauses = keys.map((k, i) => `\"${k}\" = $${i + 1}`).join(', ');\n    const values = keys.map((k) => data[k]);\n    values.push(id);\n    const { rows } = await this.pool.query(\n      `UPDATE ${T} SET ${setClauses} WHERE id = $${values.length} RETURNING *`,\n      values,\n    );\n    if (!rows[0]) throw new RedirectForgeError(`Redirect not found: ${id}`);\n    return toRedirect(rows[0]);\n  }\n\n  async updateManyStatus(ids: string[], status: Redirect['status']): Promise<void> {\n    if (ids.length === 0) return;\n    await this.pool.query(\n      `UPDATE ${T} SET status = $1 WHERE id = ANY($2::uuid[])`,\n      [status, ids],\n    );\n  }\n\n  async delete(id: string): Promise<void> {\n    await this.pool.query(`DELETE FROM ${T} WHERE id = $1`, [id]);\n  }\n\n  async deleteMany(ids: string[]): Promise<void> {\n    if (ids.length === 0) return;\n    await this.pool.query(\n      `DELETE FROM ${T} WHERE id = ANY($1::uuid[])`,\n      [ids],\n    );\n  }\n\n  async deleteByGroupId(groupId: string): Promise<void> {\n    await this.pool.query(\n      `DELETE FROM ${T} WHERE group_id = $1`,\n      [groupId],\n    );\n  }\n\n  async incrementHitCount(id: string, lastHitAt: Date): Promise<void> {\n    await this.pool.query(\n      `SELECT ${FUNCTIONS.incrementRedirectHit}($1, $2)`,\n      [id, lastHitAt.toISOString()],\n    );\n  }\n\n  async resetHitCount(id: string): Promise<void> {\n    await this.pool.query(\n      `UPDATE ${T} SET hit_count = 0, last_hit_at = NULL WHERE id = $1`,\n      [id],\n    );\n  }\n\n  async countByGroupId(groupId: string): Promise<number> {\n    const { rows } = await this.pool.query(\n      `SELECT count(*)::int AS cnt FROM ${T} WHERE group_id = $1`,\n      [groupId],\n    );\n    return rows[0]?.cnt ?? 0;\n  }\n}\n","import type {\n  RedirectLog,\n  LogQuery,\n  LogGroupQuery,\n  LogGroupResult,\n  PaginatedResult,\n} from '../types/index.js';\nimport type { RedirectLogRepository } from '../repositories/index.js';\nimport { RedirectForgeError } from '../types/index.js';\nimport type { PgPool } from './pg-client.js';\nimport { TABLES, FUNCTIONS } from './table-names.js';\nimport { toRedirectLog } from './row-mappers.js';\nimport { buildFilterClause } from './query-builder.js';\n\nconst T = TABLES.redirectLogs;\n\nexport class PgRedirectLogRepository implements RedirectLogRepository {\n  constructor(private readonly pool: PgPool) {}\n\n  async create(input: Omit<RedirectLog, 'id'>): Promise<RedirectLog> {\n    const { rows } = await this.pool.query(\n      `INSERT INTO ${T}\n       (tenant_id, redirect_id, created_at, source_url, target_url, domain,\n        ip, http_code, user_agent, referrer, request_method, request_headers, redirect_source)\n       VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13)\n       RETURNING *`,\n      [\n        input.tenant_id,\n        input.redirect_id ?? null,\n        input.created_at.toISOString(),\n        input.source_url,\n        input.target_url ?? null,\n        input.domain ?? null,\n        input.ip ?? null,\n        input.http_code,\n        input.user_agent ?? null,\n        input.referrer ?? null,\n        input.request_method ?? null,\n        input.request_headers ?? null,\n        input.redirect_source ?? null,\n      ],\n    );\n    if (!rows[0]) throw new RedirectForgeError('Failed to create redirect log');\n    return toRedirectLog(rows[0]);\n  }\n\n  async query(query: LogQuery): Promise<PaginatedResult<RedirectLog>> {\n    const page = Math.max(1, query.page ?? 1);\n    const perPage = Math.max(1, query.per_page ?? 50);\n    const offset = (page - 1) * perPage;\n\n    const baseValues: unknown[] = [query.tenant_id];\n    let filterSQL = '';\n    let nextParam = 2;\n\n    if (query.filters?.length) {\n      const f = buildFilterClause(query.filters, nextParam);\n      filterSQL = f.clause;\n      baseValues.push(...f.values);\n      nextParam = f.nextParam;\n    }\n\n    const sortBy = query.sort_by ?? 'created_at';\n    const sortDir = query.sort_dir === 'asc' ? 'ASC' : 'DESC';\n\n    // Count query\n    const { rows: countRows } = await this.pool.query(\n      `SELECT count(*)::int AS cnt FROM ${T} WHERE tenant_id = $1${filterSQL}`,\n      baseValues,\n    );\n    const total = countRows[0]?.cnt ?? 0;\n\n    // Data query\n    const dataValues = [...baseValues, perPage, offset];\n    const { rows } = await this.pool.query(\n      `SELECT * FROM ${T}\n       WHERE tenant_id = $1${filterSQL}\n       ORDER BY \"${sortBy}\" ${sortDir}\n       LIMIT $${nextParam} OFFSET $${nextParam + 1}`,\n      dataValues,\n    );\n\n    return {\n      items: rows.map(toRedirectLog),\n      total,\n      page,\n      per_page: perPage,\n      total_pages: Math.max(1, Math.ceil(total / perPage)),\n    };\n  }\n\n  async groupBy(query: LogGroupQuery): Promise<PaginatedResult<LogGroupResult>> {\n    const filters = (query.filters ?? []).map((f) => ({\n      field: f.field,\n      operator: f.operator,\n      value: f.value instanceof Date ? f.value.toISOString() : String(f.value),\n    }));\n\n    const { rows } = await this.pool.query(\n      `SELECT ${FUNCTIONS.queryRedirectLogGroups}($1, $2, $3::json, $4, $5, $6, $7) AS result`,\n      [\n        query.tenant_id,\n        query.group_by,\n        JSON.stringify(filters),\n        query.sort_by ?? 'count',\n        query.sort_dir ?? 'desc',\n        query.page ?? 1,\n        query.per_page ?? 50,\n      ],\n    );\n\n    const result = rows[0]?.result as {\n      items: Array<{ value: string; cnt: number }>;\n      total: number;\n      page: number;\n      per_page: number;\n      total_pages: number;\n    };\n\n    return {\n      items: result.items.map((i) => ({ value: i.value, count: i.cnt })),\n      total: result.total,\n      page: result.page,\n      per_page: result.per_page,\n      total_pages: result.total_pages,\n    };\n  }\n\n  async deleteMany(ids: string[]): Promise<void> {\n    if (ids.length === 0) return;\n    await this.pool.query(\n      `DELETE FROM ${T} WHERE id = ANY($1::uuid[])`,\n      [ids],\n    );\n  }\n\n  async deleteByTenantId(tenantId: string): Promise<void> {\n    await this.pool.query(\n      `DELETE FROM ${T} WHERE tenant_id = $1`,\n      [tenantId],\n    );\n  }\n\n  async deleteExpiredBatch(cutoff: Date, batchSize: number): Promise<{ deleted: number; hasMore: boolean }> {\n    const { rows } = await this.pool.query(\n      `SELECT ${FUNCTIONS.deleteExpiredRedirectLogs}($1, $2) AS result`,\n      [cutoff.toISOString(), batchSize],\n    );\n    const result = rows[0]?.result as { deleted_count: number; has_more: boolean };\n    return { deleted: result.deleted_count, hasMore: result.has_more };\n  }\n\n  async countExpired(cutoff: Date): Promise<number> {\n    const { rows } = await this.pool.query(\n      `SELECT count(*)::int AS cnt FROM ${T} WHERE created_at < $1`,\n      [cutoff.toISOString()],\n    );\n    return rows[0]?.cnt ?? 0;\n  }\n}\n","import type {\n  NotFoundLog,\n  LogQuery,\n  LogGroupQuery,\n  LogGroupResult,\n  PaginatedResult,\n} from '../types/index.js';\nimport type { NotFoundLogRepository } from '../repositories/index.js';\nimport { RedirectForgeError } from '../types/index.js';\nimport type { PgPool } from './pg-client.js';\nimport { TABLES, FUNCTIONS } from './table-names.js';\nimport { toNotFoundLog } from './row-mappers.js';\nimport { buildFilterClause } from './query-builder.js';\n\nconst T = TABLES.notFoundLogs;\n\nexport class PgNotFoundLogRepository implements NotFoundLogRepository {\n  constructor(private readonly pool: PgPool) {}\n\n  async create(input: Omit<NotFoundLog, 'id'>): Promise<NotFoundLog> {\n    const { rows } = await this.pool.query(\n      `INSERT INTO ${T}\n       (tenant_id, created_at, url, domain, ip, user_agent, referrer, request_method, request_headers)\n       VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n       RETURNING *`,\n      [\n        input.tenant_id,\n        input.created_at.toISOString(),\n        input.url,\n        input.domain ?? null,\n        input.ip ?? null,\n        input.user_agent ?? null,\n        input.referrer ?? null,\n        input.request_method ?? null,\n        input.request_headers ?? null,\n      ],\n    );\n    if (!rows[0]) throw new RedirectForgeError('Failed to create not-found log');\n    return toNotFoundLog(rows[0]);\n  }\n\n  async query(query: LogQuery): Promise<PaginatedResult<NotFoundLog>> {\n    const page = Math.max(1, query.page ?? 1);\n    const perPage = Math.max(1, query.per_page ?? 50);\n    const offset = (page - 1) * perPage;\n\n    const baseValues: unknown[] = [query.tenant_id];\n    let filterSQL = '';\n    let nextParam = 2;\n\n    if (query.filters?.length) {\n      const f = buildFilterClause(query.filters, nextParam);\n      filterSQL = f.clause;\n      baseValues.push(...f.values);\n      nextParam = f.nextParam;\n    }\n\n    const sortBy = query.sort_by ?? 'created_at';\n    const sortDir = query.sort_dir === 'asc' ? 'ASC' : 'DESC';\n\n    const { rows: countRows } = await this.pool.query(\n      `SELECT count(*)::int AS cnt FROM ${T} WHERE tenant_id = $1${filterSQL}`,\n      baseValues,\n    );\n    const total = countRows[0]?.cnt ?? 0;\n\n    const dataValues = [...baseValues, perPage, offset];\n    const { rows } = await this.pool.query(\n      `SELECT * FROM ${T}\n       WHERE tenant_id = $1${filterSQL}\n       ORDER BY \"${sortBy}\" ${sortDir}\n       LIMIT $${nextParam} OFFSET $${nextParam + 1}`,\n      dataValues,\n    );\n\n    return {\n      items: rows.map(toNotFoundLog),\n      total,\n      page,\n      per_page: perPage,\n      total_pages: Math.max(1, Math.ceil(total / perPage)),\n    };\n  }\n\n  async groupBy(query: LogGroupQuery): Promise<PaginatedResult<LogGroupResult>> {\n    const filters = (query.filters ?? []).map((f) => ({\n      field: f.field,\n      operator: f.operator,\n      value: f.value instanceof Date ? f.value.toISOString() : String(f.value),\n    }));\n\n    const { rows } = await this.pool.query(\n      `SELECT ${FUNCTIONS.queryNotFoundLogGroups}($1, $2, $3::json, $4, $5, $6, $7) AS result`,\n      [\n        query.tenant_id,\n        query.group_by,\n        JSON.stringify(filters),\n        query.sort_by ?? 'count',\n        query.sort_dir ?? 'desc',\n        query.page ?? 1,\n        query.per_page ?? 50,\n      ],\n    );\n\n    const result = rows[0]?.result as {\n      items: Array<{ value: string; cnt: number }>;\n      total: number;\n      page: number;\n      per_page: number;\n      total_pages: number;\n    };\n\n    return {\n      items: result.items.map((i) => ({ value: i.value, count: i.cnt })),\n      total: result.total,\n      page: result.page,\n      per_page: result.per_page,\n      total_pages: result.total_pages,\n    };\n  }\n\n  async deleteMany(ids: string[]): Promise<void> {\n    if (ids.length === 0) return;\n    await this.pool.query(\n      `DELETE FROM ${T} WHERE id = ANY($1::uuid[])`,\n      [ids],\n    );\n  }\n\n  async deleteByTenantId(tenantId: string): Promise<void> {\n    await this.pool.query(\n      `DELETE FROM ${T} WHERE tenant_id = $1`,\n      [tenantId],\n    );\n  }\n\n  async deleteExpiredBatch(cutoff: Date, batchSize: number): Promise<{ deleted: number; hasMore: boolean }> {\n    const { rows } = await this.pool.query(\n      `SELECT ${FUNCTIONS.deleteExpiredNotFoundLogs}($1, $2) AS result`,\n      [cutoff.toISOString(), batchSize],\n    );\n    const result = rows[0]?.result as { deleted_count: number; has_more: boolean };\n    return { deleted: result.deleted_count, hasMore: result.has_more };\n  }\n\n  async countExpired(cutoff: Date): Promise<number> {\n    const { rows } = await this.pool.query(\n      `SELECT count(*)::int AS cnt FROM ${T} WHERE created_at < $1`,\n      [cutoff.toISOString()],\n    );\n    return rows[0]?.cnt ?? 0;\n  }\n}\n","import type { StorageAdapter } from '../repositories/index.js';\nimport type { PgPool } from './pg-client.js';\nimport { PgTenantRepository } from './pg-tenant.repository.js';\nimport { PgTenantHostRepository } from './pg-tenant-host.repository.js';\nimport { PgGroupRepository } from './pg-group.repository.js';\nimport { PgRedirectRepository } from './pg-redirect.repository.js';\nimport { PgRedirectLogRepository } from './pg-redirect-log.repository.js';\nimport { PgNotFoundLogRepository } from './pg-not-found-log.repository.js';\n\nexport function createPostgresStorage(pool: PgPool): StorageAdapter {\n  return {\n    tenants: new PgTenantRepository(pool),\n    tenantHosts: new PgTenantHostRepository(pool),\n    groups: new PgGroupRepository(pool),\n    redirects: new PgRedirectRepository(pool),\n    redirectLogs: new PgRedirectLogRepository(pool),\n    notFoundLogs: new PgNotFoundLogRepository(pool),\n  };\n}\n"],"mappings":"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","names":["T","T","T","T","T"]}