{"version":3,"sources":["../src/matching/helpers/regex.ts","../src/matching/url-pattern.ts","../src/matching/helpers/ip.ts","../src/matching/helpers/locale.ts","../src/matching/helpers/header-spec.ts","../src/matching/conditions.ts","../src/matching/target-resolver.ts","../src/matching/pipeline.ts","../src/engine/action-executor.ts","../src/engine/hit-tracker.ts","../src/engine/ip-anonymizer.ts","../src/engine/logger.ts","../src/engine/processor.ts","../src/operations/tenant-ops.ts","../src/operations/host-ops.ts","../src/operations/group-ops.ts","../src/operations/redirect-ops.ts","../src/operations/bulk-ops.ts","../src/operations/content-monitor.ts","../src/operations/log-expiration.ts","../src/import/parser-json.ts","../src/import/parser-csv.ts","../src/import/importer.ts","../src/export/exporter.ts","../src/redirectforge.ts","../src/memory/memory-tenant.repository.ts","../src/memory/memory-tenant-host.repository.ts","../src/memory/memory-group.repository.ts","../src/memory/memory-redirect.repository.ts","../src/memory/log-query-helpers.ts","../src/memory/memory-redirect-log.repository.ts","../src/memory/memory-not-found-log.repository.ts","../src/memory/memory-storage-adapter.ts"],"sourcesContent":["import type { UrlMatchResult } from '../../types/index.js';\n\nexport function safeRegex(pattern: string, flags?: string): RegExp | null {\n  try {\n    return new RegExp(pattern, flags);\n  } catch {\n    return null;\n  }\n}\n\nexport function regexMatch(\n  pattern: string,\n  subject: string,\n  caseInsensitive: boolean,\n): UrlMatchResult {\n  const flags = caseInsensitive ? 'i' : '';\n  const re = safeRegex(pattern, flags);\n  if (!re) {\n    return { matched: false, captured_groups: [] };\n  }\n  const match = re.exec(subject);\n  if (!match) {\n    return { matched: false, captured_groups: [] };\n  }\n  return {\n    matched: true,\n    captured_groups: match.slice(1).map((g) => g ?? ''),\n  };\n}\n\nexport function regexTest(pattern: string, subject: string): boolean {\n  const re = safeRegex(pattern, 'i');\n  if (!re) return false;\n  return re.test(subject);\n}\n\nexport function regexSubstitute(template: string, capturedGroups: string[]): string {\n  return template.replace(/\\$(\\d+)/g, (_, index) => {\n    const i = parseInt(index, 10) - 1;\n    return i >= 0 && i < capturedGroups.length ? capturedGroups[i] : '';\n  });\n}\n","import type { Redirect } from '../types/entities.js';\nimport type { UrlMatchResult } from '../types/results.js';\nimport { regexMatch } from './helpers/regex.js';\n\nexport function extractPath(url: string): string {\n  const qIdx = url.indexOf('?');\n  return qIdx === -1 ? url : url.slice(0, qIdx);\n}\n\nexport function extractQuery(url: string): string | null {\n  const qIdx = url.indexOf('?');\n  return qIdx === -1 ? null : url.slice(qIdx + 1);\n}\n\nexport function normalizePath(\n  path: string,\n  caseInsensitive: boolean,\n  ignoreTrailingSlash: boolean,\n): string {\n  let normalized = path;\n  if (caseInsensitive) {\n    normalized = normalized.toLowerCase();\n  }\n  if (ignoreTrailingSlash && normalized.length > 1 && normalized.endsWith('/')) {\n    normalized = normalized.slice(0, -1);\n  }\n  return normalized;\n}\n\nfunction queryMatches(\n  sourceQuery: string | null,\n  requestQuery: string | null,\n  queryHandling: string,\n): boolean {\n  switch (queryHandling) {\n    case 'ignore':\n    case 'pass':\n      return true;\n    case 'exact': {\n      if (!sourceQuery && !requestQuery) return true;\n      if (!sourceQuery || !requestQuery) return sourceQuery === requestQuery;\n      const sortParams = (q: string) =>\n        q\n          .split('&')\n          .sort()\n          .join('&');\n      return sortParams(sourceQuery) === sortParams(requestQuery);\n    }\n    case 'exact_order':\n      return (sourceQuery ?? '') === (requestQuery ?? '');\n    default:\n      return true;\n  }\n}\n\nexport function evaluateUrlPattern(redirect: Redirect, requestUrl: string): UrlMatchResult {\n  if (redirect.source_flags.is_regex) {\n    return regexMatch(\n      redirect.source_url,\n      requestUrl,\n      redirect.source_flags.case_insensitive,\n    );\n  }\n\n  const sourcePath = extractPath(redirect.source_url);\n  const requestPath = extractPath(requestUrl);\n  const { case_insensitive, ignore_trailing_slash, query_handling } = redirect.source_flags;\n\n  const normSource = normalizePath(sourcePath, case_insensitive, ignore_trailing_slash);\n  const normRequest = normalizePath(requestPath, case_insensitive, ignore_trailing_slash);\n\n  if (normSource !== normRequest) {\n    return { matched: false, captured_groups: [] };\n  }\n\n  const sourceQuery = extractQuery(redirect.source_url);\n  const requestQuery = extractQuery(requestUrl);\n\n  if (!queryMatches(sourceQuery, requestQuery, query_handling)) {\n    return { matched: false, captured_groups: [] };\n  }\n\n  return { matched: true, captured_groups: [] };\n}\n","export function parseIpList(csv: string | undefined): string[] {\n  if (!csv) return [];\n  return csv\n    .split(',')\n    .map((s) => s.trim())\n    .filter(Boolean);\n}\n\nfunction parseIpv4(ip: string): number[] | null {\n  const parts = ip.split('.');\n  if (parts.length !== 4) return null;\n  const nums = parts.map(Number);\n  if (nums.some((n) => isNaN(n) || n < 0 || n > 255)) return null;\n  return nums;\n}\n\nfunction ipv4ToNumber(parts: number[]): number {\n  return ((parts[0] << 24) | (parts[1] << 16) | (parts[2] << 8) | parts[3]) >>> 0;\n}\n\nfunction matchCidr(ip: string, cidr: string): boolean {\n  const [network, prefixStr] = cidr.split('/');\n  const prefix = parseInt(prefixStr, 10);\n  if (isNaN(prefix) || prefix < 0 || prefix > 32) return false;\n\n  const ipParts = parseIpv4(ip);\n  const networkParts = parseIpv4(network);\n  if (!ipParts || !networkParts) return false;\n\n  const ipNum = ipv4ToNumber(ipParts);\n  const netNum = ipv4ToNumber(networkParts);\n  const mask = prefix === 0 ? 0 : (~0 << (32 - prefix)) >>> 0;\n\n  return (ipNum & mask) === (netNum & mask);\n}\n\nexport function ipInList(ip: string, list: string[]): boolean {\n  for (const entry of list) {\n    if (entry.includes('/')) {\n      if (matchCidr(ip, entry)) return true;\n    } else if (ip === entry) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport function anonymizeIp(ip: string): string {\n  const parts = ip.split('.');\n  if (parts.length === 4) {\n    parts[3] = '0';\n    return parts.join('.');\n  }\n  // IPv6: truncate last segment\n  const segments = ip.split(':');\n  if (segments.length > 1) {\n    segments[segments.length - 1] = '0';\n    return segments.join(':');\n  }\n  return ip;\n}\n","interface LanguageTag {\n  tag: string;\n  quality: number;\n}\n\nfunction parseAcceptLanguage(header: string | undefined): LanguageTag[] {\n  if (!header) return [];\n  return header\n    .split(',')\n    .map((part) => {\n      const [tag, ...params] = part.trim().split(';');\n      let quality = 1;\n      for (const p of params) {\n        const match = p.trim().match(/^q=(\\d+(?:\\.\\d+)?)$/);\n        if (match) {\n          quality = parseFloat(match[1]);\n        }\n      }\n      return { tag: tag.trim().toLowerCase(), quality };\n    })\n    .filter((l) => l.quality > 0)\n    .sort((a, b) => b.quality - a.quality);\n}\n\nexport function localeMatches(acceptLanguage: string | undefined, targetLocale: string): boolean {\n  const languages = parseAcceptLanguage(acceptLanguage);\n  const target = targetLocale.toLowerCase();\n\n  for (const { tag } of languages) {\n    if (tag === target) return true;\n    // Prefix match: \"en\" matches \"en-US\"\n    if (tag.startsWith(target + '-') || target.startsWith(tag + '-')) return true;\n  }\n  return false;\n}\n","export interface HeaderSpec {\n  name: string;\n  value: string;\n}\n\nexport function parseHeaderSpec(nameValue: string | undefined): HeaderSpec {\n  if (!nameValue) return { name: '', value: '' };\n  const idx = nameValue.indexOf(':');\n  if (idx === -1) return { name: nameValue.trim(), value: '' };\n  return {\n    name: nameValue.slice(0, idx).trim(),\n    value: nameValue.slice(idx + 1).trim(),\n  };\n}\n","import type { Redirect } from '../types/entities.js';\nimport type { HttpRequest } from '../types/external.js';\nimport type { ConditionEvaluation } from '../types/results.js';\nimport { MatchType } from '../types/enums.js';\nimport { regexTest } from './helpers/regex.js';\nimport { parseIpList, ipInList } from './helpers/ip.js';\nimport { localeMatches } from './helpers/locale.js';\nimport { parseHeaderSpec } from './helpers/header-spec.js';\n\nfunction containsInsensitive(haystack: string, needle: string): boolean {\n  return haystack.toLowerCase().includes(needle.toLowerCase());\n}\n\nfunction evaluateIp(redirect: Redirect, request: HttpRequest): boolean {\n  const ipList = parseIpList(redirect.match_value);\n  return request.client_ip ? ipInList(request.client_ip, ipList) : false;\n}\n\nfunction evaluateUserAgent(redirect: Redirect, request: HttpRequest): boolean {\n  const ua = request.user_agent ?? '';\n  if (redirect.match_is_regex) {\n    return regexTest(redirect.match_value ?? '', ua);\n  }\n  return containsInsensitive(ua, redirect.match_value ?? '');\n}\n\nfunction evaluateReferrer(redirect: Redirect, request: HttpRequest): boolean {\n  const ref = request.referrer ?? '';\n  if (redirect.match_is_regex) {\n    return regexTest(redirect.match_value ?? '', ref);\n  }\n  return containsInsensitive(ref, redirect.match_value ?? '');\n}\n\nfunction evaluateLoginStatus(_redirect: Redirect, request: HttpRequest): boolean {\n  return request.is_authenticated;\n}\n\nfunction evaluateHeader(redirect: Redirect, request: HttpRequest): boolean {\n  const spec = parseHeaderSpec(redirect.match_value);\n  const actual = request.headers?.[spec.name.toLowerCase()] ?? request.headers?.[spec.name];\n  if (redirect.match_is_regex) {\n    return regexTest(spec.value, actual ?? '');\n  }\n  return actual === spec.value;\n}\n\nfunction evaluateCookie(redirect: Redirect, request: HttpRequest): boolean {\n  const spec = parseHeaderSpec(redirect.match_value);\n  const actual = request.cookies?.[spec.name];\n  if (redirect.match_is_regex) {\n    return regexTest(spec.value, actual ?? '');\n  }\n  return actual === spec.value;\n}\n\nfunction evaluateRole(redirect: Redirect, request: HttpRequest): boolean {\n  return request.is_authenticated && request.user_role === redirect.match_value;\n}\n\nfunction evaluateServerVariable(redirect: Redirect, request: HttpRequest): boolean {\n  const spec = parseHeaderSpec(redirect.match_value);\n  const actual = request.server_variables?.[spec.name];\n  return actual === spec.value;\n}\n\nfunction evaluateLanguage(redirect: Redirect, request: HttpRequest): boolean {\n  return localeMatches(request.accept_language, redirect.match_value ?? '');\n}\n\nexport function evaluateCondition(redirect: Redirect, request: HttpRequest): ConditionEvaluation {\n  switch (redirect.match_type) {\n    case MatchType.url:\n      return { checked: false, matched: true };\n    case MatchType.ip:\n      return { checked: true, matched: evaluateIp(redirect, request) };\n    case MatchType.user_agent:\n      return { checked: true, matched: evaluateUserAgent(redirect, request) };\n    case MatchType.referrer:\n      return { checked: true, matched: evaluateReferrer(redirect, request) };\n    case MatchType.login_status:\n      return { checked: true, matched: evaluateLoginStatus(redirect, request) };\n    case MatchType.header:\n      return { checked: true, matched: evaluateHeader(redirect, request) };\n    case MatchType.cookie:\n      return { checked: true, matched: evaluateCookie(redirect, request) };\n    case MatchType.role:\n      return { checked: true, matched: evaluateRole(redirect, request) };\n    case MatchType.server_variable:\n      return { checked: true, matched: evaluateServerVariable(redirect, request) };\n    case MatchType.language:\n      return { checked: true, matched: evaluateLanguage(redirect, request) };\n    default:\n      return { checked: false, matched: true };\n  }\n}\n","import type { Redirect } from '../types/entities.js';\nimport type { ConditionEvaluation, UrlMatchResult } from '../types/results.js';\nimport { MatchType } from '../types/enums.js';\nimport { regexSubstitute } from './helpers/regex.js';\nimport { extractQuery } from './url-pattern.js';\n\nexport function applyQueryHandling(\n  targetUrl: string,\n  requestUrl: string,\n  queryHandling: string,\n): string {\n  switch (queryHandling) {\n    case 'ignore': {\n      const qIdx = targetUrl.indexOf('?');\n      return qIdx === -1 ? targetUrl : targetUrl.slice(0, qIdx);\n    }\n    case 'pass': {\n      const requestQuery = extractQuery(requestUrl);\n      if (!requestQuery) return targetUrl;\n      const separator = targetUrl.includes('?') ? '&' : '?';\n      return targetUrl + separator + requestQuery;\n    }\n    case 'exact':\n    case 'exact_order':\n    default:\n      return targetUrl;\n  }\n}\n\nfunction selectRawTarget(\n  redirect: Redirect,\n  condition: ConditionEvaluation,\n): string | null {\n  if (redirect.match_type === MatchType.url) {\n    return redirect.target_url ?? null;\n  }\n\n  // login_status and all conditional match types follow the same pattern:\n  // matched → target_url, not matched → alternate_target_url\n  if (condition.matched) {\n    return redirect.target_url ?? null;\n  }\n  return redirect.alternate_target_url ?? null;\n}\n\nexport function resolveTarget(\n  redirect: Redirect,\n  requestUrl: string,\n  urlResult: UrlMatchResult,\n  condition: ConditionEvaluation,\n): string | null {\n  const rawTarget = selectRawTarget(redirect, condition);\n  if (rawTarget === null) return null;\n\n  let substituted = rawTarget;\n  if (redirect.source_flags.is_regex) {\n    substituted = regexSubstitute(rawTarget, urlResult.captured_groups);\n  }\n\n  return applyQueryHandling(\n    substituted,\n    requestUrl,\n    redirect.source_flags.query_handling,\n  );\n}\n","import type { Redirect } from '../types/entities.js';\nimport type { HttpRequest } from '../types/external.js';\nimport type { RedirectWithGroupPosition } from '../repositories/redirect.repository.js';\nimport { evaluateUrlPattern } from './url-pattern.js';\nimport { evaluateCondition } from './conditions.js';\nimport { resolveTarget } from './target-resolver.js';\n\nexport interface PipelineMatch {\n  redirect: Redirect;\n  target: string;\n}\n\nexport function findRedirect(\n  candidates: RedirectWithGroupPosition[],\n  request: HttpRequest,\n): PipelineMatch | null {\n  // Candidates should already be sorted by (group_position ASC, position ASC)\n  for (const candidate of candidates) {\n    const urlResult = evaluateUrlPattern(candidate, request.url);\n    if (!urlResult.matched) continue;\n\n    const condition = evaluateCondition(candidate, request);\n    const target = resolveTarget(candidate, request.url, urlResult, condition);\n    if (target === null) continue;\n\n    return { redirect: candidate, target };\n  }\n\n  return null;\n}\n","import type { Redirect } from '../types/entities.js';\nimport type { HttpRequest } from '../types/external.js';\nimport type { ActionResult } from '../types/results.js';\nimport { ActionType } from '../types/enums.js';\n\nexport function executeAction(\n  redirect: Redirect,\n  target: string,\n  request: HttpRequest,\n): ActionResult {\n  switch (redirect.action_type) {\n    case ActionType.redirect:\n      return { type: 'redirect', url: target, code: redirect.action_code };\n\n    case ActionType.error:\n      return { type: 'error', code: redirect.action_code };\n\n    case ActionType.rewrite:\n      return { type: 'rewrite', original_url: request.url, target_url: target };\n\n    case ActionType.random: {\n      if (redirect.random_targets.length === 0) {\n        return { type: 'nothing' };\n      }\n      const idx = Math.floor(Math.random() * redirect.random_targets.length);\n      return { type: 'random_redirect', url: redirect.random_targets[idx], code: redirect.action_code };\n    }\n\n    case ActionType.nothing:\n      return { type: 'nothing' };\n\n    default:\n      return { type: 'pass' };\n  }\n}\n","import type { StorageAdapter } from '../repositories/index.js';\nimport type { RedirectForgeConfig, Redirect } from '../types/index.js';\n\nexport async function trackHit(\n  storage: StorageAdapter,\n  config: RedirectForgeConfig,\n  redirect: Redirect,\n): Promise<void> {\n  if (!config.track_hits) return;\n  await storage.redirects.incrementHitCount(redirect.id, new Date());\n}\n","import type { IpLogging } from '../types/index.js';\nimport { anonymizeIp } from '../matching/helpers/ip.js';\n\nexport function captureIp(clientIp: string | undefined, mode: IpLogging): string | undefined {\n  if (!clientIp) return undefined;\n  switch (mode) {\n    case 'full':\n      return clientIp;\n    case 'anonymized':\n      return anonymizeIp(clientIp);\n    case 'none':\n      return undefined;\n  }\n}\n","import type { StorageAdapter } from '../repositories/index.js';\nimport type { RedirectForgeConfig, HttpRequest, Redirect } from '../types/index.js';\nimport { captureIp } from './ip-anonymizer.js';\n\nfunction serializeHeaders(request: HttpRequest): string | undefined {\n  if (!request.headers) return undefined;\n  return JSON.stringify(request.headers);\n}\n\nexport async function logRedirect(\n  storage: StorageAdapter,\n  config: RedirectForgeConfig,\n  request: HttpRequest,\n  redirect: Redirect,\n  target: string,\n  tenantId: string,\n): Promise<void> {\n  if (redirect.log_excluded) return;\n\n  const ip = captureIp(request.client_ip, config.ip_logging);\n  const headers = config.log_request_headers ? serializeHeaders(request) : undefined;\n\n  await storage.redirectLogs.create({\n    tenant_id: tenantId,\n    redirect_id: redirect.id,\n    created_at: new Date(),\n    source_url: request.url,\n    target_url: target,\n    domain: request.domain,\n    ip,\n    http_code: redirect.action_code,\n    user_agent: request.user_agent,\n    referrer: request.referrer,\n    request_method: request.method,\n    request_headers: headers,\n    redirect_source: 'redirection',\n  });\n}\n\nexport async function logNotFound(\n  storage: StorageAdapter,\n  config: RedirectForgeConfig,\n  request: HttpRequest,\n  tenantId: string,\n): Promise<void> {\n  const ip = captureIp(request.client_ip, config.ip_logging);\n  const headers = config.log_request_headers ? serializeHeaders(request) : undefined;\n\n  await storage.notFoundLogs.create({\n    tenant_id: tenantId,\n    created_at: new Date(),\n    url: request.url,\n    domain: request.domain,\n    ip,\n    user_agent: request.user_agent,\n    referrer: request.referrer,\n    request_method: request.method,\n    request_headers: headers,\n  });\n}\n","import type { StorageAdapter } from '../repositories/index.js';\nimport type { RedirectForgeConfig, HttpRequest, ProcessResult } from '../types/index.js';\nimport { findRedirect } from '../matching/pipeline.js';\nimport { executeAction } from './action-executor.js';\nimport { trackHit } from './hit-tracker.js';\nimport { logRedirect, logNotFound } from './logger.js';\n\nconst PASS_RESULT: ProcessResult = { action: { type: 'pass' } };\n\nexport async function processRequest(\n  storage: StorageAdapter,\n  config: RedirectForgeConfig,\n  request: HttpRequest,\n): Promise<ProcessResult> {\n  // 1. Resolve tenant from hostname\n  const host = await storage.tenantHosts.findByHostname(request.domain);\n  if (!host || host.status !== 'enabled') return PASS_RESULT;\n\n  // 2. Check tenant is active\n  const tenant = await storage.tenants.findById(host.tenant_id);\n  if (!tenant || tenant.status !== 'active') return PASS_RESULT;\n\n  // 3. Get sorted active redirects\n  const candidates = await storage.redirects.findActiveByTenantId(tenant.id);\n\n  // 4. Find matching redirect\n  const match = findRedirect(candidates, request);\n\n  if (!match) {\n    // 5. No match — log 404 if applicable\n    if (request.response_code === 404) {\n      await logNotFound(storage, config, request, tenant.id);\n    }\n    return PASS_RESULT;\n  }\n\n  // 6. Execute action\n  const action = executeAction(match.redirect, match.target, request);\n\n  // 7. Track hit\n  await trackHit(storage, config, match.redirect);\n\n  // 8. Log redirect\n  await logRedirect(storage, config, request, match.redirect, match.target, tenant.id);\n\n  return {\n    action,\n    redirect_id: match.redirect.id,\n    tenant_id: tenant.id,\n  };\n}\n","import type { StorageAdapter } from '../repositories/index.js';\nimport type { Tenant } from '../types/index.js';\nimport { NotFoundError, PreconditionError } from '../types/index.js';\n\nexport async function createTenant(\n  storage: StorageAdapter,\n  name: string,\n): Promise<Tenant> {\n  return storage.tenants.create({ name, status: 'active' });\n}\n\nexport async function suspendTenant(\n  storage: StorageAdapter,\n  tenantId: string,\n): Promise<Tenant> {\n  const tenant = await storage.tenants.findById(tenantId);\n  if (!tenant) throw new NotFoundError('Tenant', tenantId);\n  if (tenant.status !== 'active') {\n    throw new PreconditionError('Tenant must be active to suspend');\n  }\n  return storage.tenants.update(tenantId, { status: 'suspended' });\n}\n\nexport async function activateTenant(\n  storage: StorageAdapter,\n  tenantId: string,\n): Promise<Tenant> {\n  const tenant = await storage.tenants.findById(tenantId);\n  if (!tenant) throw new NotFoundError('Tenant', tenantId);\n  if (tenant.status !== 'suspended') {\n    throw new PreconditionError('Tenant must be suspended to activate');\n  }\n  return storage.tenants.update(tenantId, { status: 'active' });\n}\n","import type { StorageAdapter } from '../repositories/index.js';\nimport type { TenantHost } from '../types/index.js';\nimport { NotFoundError, PreconditionError } from '../types/index.js';\n\nexport async function addHost(\n  storage: StorageAdapter,\n  tenantId: string,\n  hostname: string,\n  environment?: string,\n): Promise<TenantHost> {\n  const tenant = await storage.tenants.findById(tenantId);\n  if (!tenant) throw new NotFoundError('Tenant', tenantId);\n  if (tenant.status !== 'active') {\n    throw new PreconditionError('Tenant must be active to add host');\n  }\n\n  const existing = await storage.tenantHosts.findByHostname(hostname);\n  if (existing) {\n    throw new PreconditionError(`Hostname already registered: ${hostname}`);\n  }\n\n  return storage.tenantHosts.create({\n    tenant_id: tenantId,\n    hostname,\n    environment,\n    status: 'enabled',\n  });\n}\n\nexport async function removeHost(\n  storage: StorageAdapter,\n  hostId: string,\n): Promise<void> {\n  const host = await storage.tenantHosts.findById(hostId);\n  if (!host) throw new NotFoundError('TenantHost', hostId);\n\n  const allHosts = await storage.tenantHosts.findByTenantId(host.tenant_id);\n  const activeHosts = allHosts.filter((h) => h.status === 'enabled');\n  if (activeHosts.length <= 1 && host.status === 'enabled') {\n    throw new PreconditionError('Cannot remove last active host');\n  }\n\n  await storage.tenantHosts.delete(hostId);\n}\n\nexport async function enableHost(\n  storage: StorageAdapter,\n  hostId: string,\n): Promise<TenantHost> {\n  const host = await storage.tenantHosts.findById(hostId);\n  if (!host) throw new NotFoundError('TenantHost', hostId);\n  if (host.status !== 'disabled') {\n    throw new PreconditionError('Host must be disabled to enable');\n  }\n  return storage.tenantHosts.update(hostId, { status: 'enabled' });\n}\n\nexport async function disableHost(\n  storage: StorageAdapter,\n  hostId: string,\n): Promise<TenantHost> {\n  const host = await storage.tenantHosts.findById(hostId);\n  if (!host) throw new NotFoundError('TenantHost', hostId);\n  if (host.status !== 'enabled') {\n    throw new PreconditionError('Host must be enabled to disable');\n  }\n  return storage.tenantHosts.update(hostId, { status: 'disabled' });\n}\n","import type { StorageAdapter } from '../repositories/index.js';\nimport type { Group } from '../types/index.js';\nimport { NotFoundError, PreconditionError } from '../types/index.js';\n\nexport async function createGroup(\n  storage: StorageAdapter,\n  tenantId: string,\n  name: string,\n): Promise<Group> {\n  const tenant = await storage.tenants.findById(tenantId);\n  if (!tenant) throw new NotFoundError('Tenant', tenantId);\n  if (tenant.status !== 'active') {\n    throw new PreconditionError('Tenant must be active to create group');\n  }\n\n  const position = await storage.groups.countByTenantId(tenantId);\n  return storage.groups.create({\n    tenant_id: tenantId,\n    name,\n    status: 'enabled',\n    position,\n  });\n}\n\nexport async function enableGroup(\n  storage: StorageAdapter,\n  groupId: string,\n): Promise<Group> {\n  const group = await storage.groups.findById(groupId);\n  if (!group) throw new NotFoundError('Group', groupId);\n  if (group.status !== 'disabled') {\n    throw new PreconditionError('Group must be disabled to enable');\n  }\n\n  const redirects = await storage.redirects.findByGroupId(groupId);\n  const ids = redirects.map((r) => r.id);\n  if (ids.length > 0) {\n    await storage.redirects.updateManyStatus(ids, 'enabled');\n  }\n\n  return storage.groups.update(groupId, { status: 'enabled' });\n}\n\nexport async function disableGroup(\n  storage: StorageAdapter,\n  groupId: string,\n): Promise<Group> {\n  const group = await storage.groups.findById(groupId);\n  if (!group) throw new NotFoundError('Group', groupId);\n  if (group.status !== 'enabled') {\n    throw new PreconditionError('Group must be enabled to disable');\n  }\n\n  const redirects = await storage.redirects.findByGroupId(groupId);\n  const ids = redirects.map((r) => r.id);\n  if (ids.length > 0) {\n    await storage.redirects.updateManyStatus(ids, 'disabled');\n  }\n\n  return storage.groups.update(groupId, { status: 'disabled' });\n}\n\nexport async function deleteGroup(\n  storage: StorageAdapter,\n  groupId: string,\n): Promise<void> {\n  const group = await storage.groups.findById(groupId);\n  if (!group) throw new NotFoundError('Group', groupId);\n\n  await storage.redirects.deleteByGroupId(groupId);\n  await storage.groups.delete(groupId);\n}\n","import type { StorageAdapter } from '../repositories/index.js';\nimport type { Redirect, SourceFlags, MatchType, ActionType } from '../types/index.js';\nimport { NotFoundError, PreconditionError } from '../types/index.js';\n\nexport interface CreateRedirectInput {\n  group_id: string;\n  source_url: string;\n  source_flags: SourceFlags;\n  match_type: MatchType;\n  action_type: ActionType;\n  action_code: number;\n  target_url?: string;\n  alternate_target_url?: string;\n  title?: string;\n  match_value?: string;\n  match_is_regex?: boolean;\n  random_targets?: string[];\n  log_excluded?: boolean;\n}\n\nexport interface UpdateRedirectInput {\n  source_url?: string;\n  source_flags?: SourceFlags;\n  match_type?: MatchType;\n  match_value?: string;\n  match_is_regex?: boolean;\n  target_url?: string;\n  alternate_target_url?: string;\n  action_type?: ActionType;\n  action_code?: number;\n  group_id?: string;\n  title?: string;\n  random_targets?: string[];\n  log_excluded?: boolean;\n}\n\nexport async function createRedirect(\n  storage: StorageAdapter,\n  input: CreateRedirectInput,\n): Promise<Redirect> {\n  const position = await storage.redirects.countByGroupId(input.group_id);\n  return storage.redirects.create({\n    group_id: input.group_id,\n    position,\n    source_url: input.source_url,\n    source_flags: input.source_flags,\n    match_type: input.match_type,\n    match_value: input.match_value,\n    match_is_regex: input.match_is_regex ?? false,\n    target_url: input.target_url,\n    alternate_target_url: input.alternate_target_url,\n    action_type: input.action_type,\n    action_code: input.action_code,\n    random_targets: input.random_targets ?? [],\n    title: input.title,\n    status: 'enabled',\n    hit_count: 0,\n    log_excluded: input.log_excluded ?? false,\n  });\n}\n\nexport async function updateRedirect(\n  storage: StorageAdapter,\n  redirectId: string,\n  input: UpdateRedirectInput,\n): Promise<Redirect> {\n  const existing = await storage.redirects.findById(redirectId);\n  if (!existing) throw new NotFoundError('Redirect', redirectId);\n\n  return storage.redirects.update(redirectId, {\n    source_url: input.source_url ?? existing.source_url,\n    source_flags: input.source_flags ?? existing.source_flags,\n    match_type: input.match_type ?? existing.match_type,\n    match_value: input.match_value ?? existing.match_value,\n    match_is_regex: input.match_is_regex ?? existing.match_is_regex,\n    target_url: input.target_url ?? existing.target_url,\n    alternate_target_url: input.alternate_target_url ?? existing.alternate_target_url,\n    action_type: input.action_type ?? existing.action_type,\n    action_code: input.action_code ?? existing.action_code,\n    group_id: input.group_id ?? existing.group_id,\n    title: input.title ?? existing.title,\n    random_targets: input.random_targets ?? existing.random_targets,\n    log_excluded: input.log_excluded ?? existing.log_excluded,\n  });\n}\n\nexport async function enableRedirect(\n  storage: StorageAdapter,\n  redirectId: string,\n): Promise<Redirect> {\n  const redirect = await storage.redirects.findById(redirectId);\n  if (!redirect) throw new NotFoundError('Redirect', redirectId);\n  if (redirect.status !== 'disabled') {\n    throw new PreconditionError('Redirect must be disabled to enable');\n  }\n  return storage.redirects.update(redirectId, { status: 'enabled' });\n}\n\nexport async function disableRedirect(\n  storage: StorageAdapter,\n  redirectId: string,\n): Promise<Redirect> {\n  const redirect = await storage.redirects.findById(redirectId);\n  if (!redirect) throw new NotFoundError('Redirect', redirectId);\n  if (redirect.status !== 'enabled') {\n    throw new PreconditionError('Redirect must be enabled to disable');\n  }\n  return storage.redirects.update(redirectId, { status: 'disabled' });\n}\n\nexport async function deleteRedirect(\n  storage: StorageAdapter,\n  redirectId: string,\n): Promise<void> {\n  await storage.redirects.delete(redirectId);\n}\n\nexport async function resetRedirectHits(\n  storage: StorageAdapter,\n  redirectId: string,\n): Promise<void> {\n  const redirect = await storage.redirects.findById(redirectId);\n  if (!redirect) throw new NotFoundError('Redirect', redirectId);\n  await storage.redirects.resetHitCount(redirectId);\n}\n","import type { StorageAdapter } from '../repositories/index.js';\nimport type { RedirectStatus } from '../types/index.js';\n\nexport async function bulkDeleteRedirects(\n  storage: StorageAdapter,\n  ids: string[],\n): Promise<void> {\n  await storage.redirects.deleteMany(ids);\n}\n\nexport async function bulkSetRedirectStatus(\n  storage: StorageAdapter,\n  ids: string[],\n  status: RedirectStatus,\n): Promise<void> {\n  await storage.redirects.updateManyStatus(ids, status);\n}\n\nexport async function bulkDeleteRedirectLogs(\n  storage: StorageAdapter,\n  ids: string[],\n): Promise<void> {\n  await storage.redirectLogs.deleteMany(ids);\n}\n\nexport async function bulkDeleteNotFoundLogs(\n  storage: StorageAdapter,\n  ids: string[],\n): Promise<void> {\n  await storage.notFoundLogs.deleteMany(ids);\n}\n\nexport async function deleteAllTenantRedirectLogs(\n  storage: StorageAdapter,\n  tenantId: string,\n): Promise<void> {\n  await storage.redirectLogs.deleteByTenantId(tenantId);\n}\n\nexport async function deleteAllTenantNotFoundLogs(\n  storage: StorageAdapter,\n  tenantId: string,\n): Promise<void> {\n  await storage.notFoundLogs.deleteByTenantId(tenantId);\n}\n","import type { StorageAdapter } from '../repositories/index.js';\nimport type { RedirectForgeConfig, ContentItem, Redirect } from '../types/index.js';\n\nexport async function handleContentUrlChange(\n  storage: StorageAdapter,\n  config: RedirectForgeConfig,\n  tenantId: string,\n  targetGroupId: string,\n  item: ContentItem,\n): Promise<Redirect | null> {\n  if (!item.previous_url) return null;\n  if (item.previous_url === item.current_url) return null;\n  if (!config.monitor_content_types.has(item.content_type)) return null;\n\n  const position = await storage.redirects.countByGroupId(targetGroupId);\n  return storage.redirects.create({\n    group_id: targetGroupId,\n    position,\n    source_url: item.previous_url,\n    source_flags: {\n      case_insensitive: false,\n      ignore_trailing_slash: false,\n      query_handling: 'exact',\n      is_regex: false,\n    },\n    match_type: 'url',\n    match_value: undefined,\n    match_is_regex: false,\n    target_url: item.current_url,\n    alternate_target_url: undefined,\n    action_type: 'redirect',\n    action_code: 301,\n    random_targets: [],\n    title: undefined,\n    status: 'enabled',\n    hit_count: 0,\n    log_excluded: false,\n  });\n}\n","import type { StorageAdapter } from '../repositories/index.js';\nimport type { RedirectForgeConfig } from '../types/index.js';\n\nexport interface ExpirationResult {\n  redirect_logs: { deleted: number; hasMore: boolean };\n  not_found_logs: { deleted: number; hasMore: boolean };\n}\n\nexport async function expireLogs(\n  storage: StorageAdapter,\n  config: RedirectForgeConfig,\n): Promise<ExpirationResult> {\n  const result: ExpirationResult = {\n    redirect_logs: { deleted: 0, hasMore: false },\n    not_found_logs: { deleted: 0, hasMore: false },\n  };\n\n  if (config.redirect_log_retention_days > 0) {\n    const cutoff = new Date();\n    cutoff.setDate(cutoff.getDate() - config.redirect_log_retention_days);\n\n    const count = await storage.redirectLogs.countExpired(cutoff);\n    if (count > 0) {\n      const batchSize = count > config.aggressive_cleanup_threshold\n        ? config.aggressive_cleanup_batch_size\n        : config.log_cleanup_batch_size;\n\n      result.redirect_logs = await storage.redirectLogs.deleteExpiredBatch(cutoff, batchSize);\n    }\n  }\n\n  if (config.not_found_log_retention_days > 0) {\n    const cutoff = new Date();\n    cutoff.setDate(cutoff.getDate() - config.not_found_log_retention_days);\n\n    const count = await storage.notFoundLogs.countExpired(cutoff);\n    if (count > 0) {\n      const batchSize = count > config.aggressive_cleanup_threshold\n        ? config.aggressive_cleanup_batch_size\n        : config.log_cleanup_batch_size;\n\n      result.not_found_logs = await storage.notFoundLogs.deleteExpiredBatch(cutoff, batchSize);\n    }\n  }\n\n  return result;\n}\n","import type { ParseResult, ImportRecord, ParseError } from './types.js';\nimport { MatchType, ActionType, QueryHandling } from '../types/index.js';\n\nconst VALID_MATCH_TYPES = new Set(Object.values(MatchType));\nconst VALID_ACTION_TYPES = new Set(Object.values(ActionType));\nconst VALID_QUERY_HANDLING = new Set(Object.values(QueryHandling));\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction validateRecord(raw: any, index: number): ImportRecord | ParseError {\n  if (!raw.source_url || typeof raw.source_url !== 'string') {\n    return { row: index, message: 'Missing or invalid source_url' };\n  }\n\n  const matchType = raw.match_type ?? 'url';\n  if (!VALID_MATCH_TYPES.has(matchType)) {\n    return { row: index, message: `Invalid match_type: ${matchType}` };\n  }\n\n  const actionType = raw.action_type ?? 'redirect';\n  if (!VALID_ACTION_TYPES.has(actionType)) {\n    return { row: index, message: `Invalid action_type: ${actionType}` };\n  }\n\n  const queryHandling = raw.source_flags?.query_handling ?? raw.query_handling ?? 'exact';\n  if (!VALID_QUERY_HANDLING.has(queryHandling)) {\n    return { row: index, message: `Invalid query_handling: ${queryHandling}` };\n  }\n\n  return {\n    source_url: raw.source_url,\n    source_flags: {\n      case_insensitive: raw.source_flags?.case_insensitive ?? raw.case_insensitive ?? false,\n      ignore_trailing_slash: raw.source_flags?.ignore_trailing_slash ?? raw.ignore_trailing_slash ?? false,\n      query_handling: queryHandling,\n      is_regex: raw.source_flags?.is_regex ?? raw.is_regex ?? false,\n    },\n    match_type: matchType,\n    match_value: raw.match_value,\n    match_is_regex: raw.match_is_regex ?? false,\n    target_url: raw.target_url,\n    alternate_target_url: raw.alternate_target_url,\n    action_type: actionType,\n    action_code: raw.action_code ?? 301,\n    random_targets: raw.random_targets ?? [],\n    title: raw.title,\n  };\n}\n\nexport function parseJson(source: string): ParseResult {\n  const records: ImportRecord[] = [];\n  const errors: ParseError[] = [];\n\n  let parsed: unknown;\n  try {\n    parsed = JSON.parse(source);\n  } catch {\n    return { records: [], errors: [{ row: 0, message: 'Invalid JSON' }] };\n  }\n\n  if (!Array.isArray(parsed)) {\n    return { records: [], errors: [{ row: 0, message: 'Expected JSON array' }] };\n  }\n\n  for (let i = 0; i < parsed.length; i++) {\n    const result = validateRecord(parsed[i], i);\n    if ('message' in result) {\n      errors.push(result);\n    } else {\n      records.push(result);\n    }\n  }\n\n  return { records, errors };\n}\n","import type { ParseResult, ImportRecord, ParseError } from './types.js';\n\n// CSV columns: source_url, target_url, action_type, action_code, match_type, title\n// Minimal hand-written CSV parser (no dependencies)\n\nfunction parseCsvLine(line: string): string[] {\n  const fields: string[] = [];\n  let current = '';\n  let inQuotes = false;\n\n  for (let i = 0; i < line.length; i++) {\n    const ch = line[i];\n    if (inQuotes) {\n      if (ch === '\"') {\n        if (i + 1 < line.length && line[i + 1] === '\"') {\n          current += '\"';\n          i++;\n        } else {\n          inQuotes = false;\n        }\n      } else {\n        current += ch;\n      }\n    } else {\n      if (ch === '\"') {\n        inQuotes = true;\n      } else if (ch === ',') {\n        fields.push(current.trim());\n        current = '';\n      } else {\n        current += ch;\n      }\n    }\n  }\n  fields.push(current.trim());\n  return fields;\n}\n\nexport function parseCsv(source: string): ParseResult {\n  const records: ImportRecord[] = [];\n  const errors: ParseError[] = [];\n\n  const lines = source.split(/\\r?\\n/).filter((l) => l.trim().length > 0);\n  if (lines.length === 0) {\n    return { records: [], errors: [] };\n  }\n\n  // First line is header\n  const header = parseCsvLine(lines[0]).map((h) => h.toLowerCase());\n  const colIdx = (name: string) => header.indexOf(name);\n\n  const srcIdx = colIdx('source_url');\n  const tgtIdx = colIdx('target_url');\n  const actionTypeIdx = colIdx('action_type');\n  const actionCodeIdx = colIdx('action_code');\n  const matchTypeIdx = colIdx('match_type');\n  const titleIdx = colIdx('title');\n\n  if (srcIdx === -1) {\n    return { records: [], errors: [{ row: 0, message: 'Missing source_url column in header' }] };\n  }\n\n  for (let i = 1; i < lines.length; i++) {\n    const fields = parseCsvLine(lines[i]);\n    const sourceUrl = fields[srcIdx];\n\n    if (!sourceUrl) {\n      errors.push({ row: i, message: 'Empty source_url' });\n      continue;\n    }\n\n    records.push({\n      source_url: sourceUrl,\n      source_flags: {\n        case_insensitive: false,\n        ignore_trailing_slash: false,\n        query_handling: 'exact',\n        is_regex: false,\n      },\n      match_type: (fields[matchTypeIdx] as ImportRecord['match_type']) || 'url',\n      match_is_regex: false,\n      target_url: tgtIdx !== -1 ? fields[tgtIdx] || undefined : undefined,\n      action_type: (fields[actionTypeIdx] as ImportRecord['action_type']) || 'redirect',\n      action_code: actionCodeIdx !== -1 ? parseInt(fields[actionCodeIdx], 10) || 301 : 301,\n      random_targets: [],\n      title: titleIdx !== -1 ? fields[titleIdx] || undefined : undefined,\n    });\n  }\n\n  return { records, errors };\n}\n","import type { StorageAdapter } from '../repositories/index.js';\nimport type { ImportFormat, ImportResult } from './types.js';\nimport { parseJson } from './parser-json.js';\nimport { parseCsv } from './parser-csv.js';\n\nexport async function importRedirects(\n  storage: StorageAdapter,\n  sourceData: string,\n  format: ImportFormat,\n  targetGroupId: string,\n): Promise<ImportResult> {\n  const parseResult = format === 'json' ? parseJson(sourceData) : parseCsv(sourceData);\n\n  if (parseResult.records.length === 0) {\n    return { created: 0, errors: parseResult.errors };\n  }\n\n  const existingCount = await storage.redirects.countByGroupId(targetGroupId);\n\n  const createData = parseResult.records.map((record, i) => ({\n    group_id: targetGroupId,\n    position: existingCount + i,\n    source_url: record.source_url,\n    source_flags: record.source_flags,\n    match_type: record.match_type,\n    match_value: record.match_value,\n    match_is_regex: record.match_is_regex,\n    target_url: record.target_url,\n    alternate_target_url: record.alternate_target_url,\n    action_type: record.action_type,\n    action_code: record.action_code,\n    random_targets: record.random_targets,\n    title: record.title,\n    status: 'enabled' as const,\n    hit_count: 0,\n    log_excluded: false,\n  }));\n\n  await storage.redirects.createMany(createData);\n\n  return {\n    created: parseResult.records.length,\n    errors: parseResult.errors,\n  };\n}\n","import type { Redirect, RedirectLog, NotFoundLog } from '../types/index.js';\nimport type { ExportFormat } from './types.js';\n\nfunction escapeCsvField(value: string): string {\n  if (value.includes(',') || value.includes('\"') || value.includes('\\n')) {\n    return `\"${value.replace(/\"/g, '\"\"')}\"`;\n  }\n  return value;\n}\n\nfunction redirectToCsvRow(r: Redirect): string {\n  return [\n    escapeCsvField(r.source_url),\n    escapeCsvField(r.target_url ?? ''),\n    r.action_type,\n    String(r.action_code),\n    r.match_type,\n    escapeCsvField(r.title ?? ''),\n  ].join(',');\n}\n\nfunction redirectToJsonObj(r: Redirect): Record<string, unknown> {\n  return {\n    source_url: r.source_url,\n    target_url: r.target_url,\n    alternate_target_url: r.alternate_target_url,\n    source_flags: r.source_flags,\n    match_type: r.match_type,\n    match_value: r.match_value,\n    match_is_regex: r.match_is_regex,\n    action_type: r.action_type,\n    action_code: r.action_code,\n    random_targets: r.random_targets.length > 0 ? r.random_targets : undefined,\n    title: r.title,\n  };\n}\n\nexport function exportRedirects(redirects: Redirect[], format: ExportFormat): string {\n  if (format === 'json') {\n    return JSON.stringify(redirects.map(redirectToJsonObj), null, 2);\n  }\n\n  const header = 'source_url,target_url,action_type,action_code,match_type,title';\n  const rows = redirects.map(redirectToCsvRow);\n  return [header, ...rows].join('\\n');\n}\n\nexport function exportRedirectLogsAsCsv(logs: RedirectLog[]): string {\n  const header = 'created_at,source_url,target_url,domain,ip,http_code,user_agent,referrer,request_method';\n  const rows = logs.map((l) =>\n    [\n      l.created_at.toISOString(),\n      escapeCsvField(l.source_url),\n      escapeCsvField(l.target_url ?? ''),\n      escapeCsvField(l.domain ?? ''),\n      l.ip ?? '',\n      String(l.http_code),\n      escapeCsvField(l.user_agent ?? ''),\n      escapeCsvField(l.referrer ?? ''),\n      l.request_method ?? '',\n    ].join(','),\n  );\n  return [header, ...rows].join('\\n');\n}\n\nexport function exportNotFoundLogsAsCsv(logs: NotFoundLog[]): string {\n  const header = 'created_at,url,domain,ip,user_agent,referrer,request_method';\n  const rows = logs.map((l) =>\n    [\n      l.created_at.toISOString(),\n      escapeCsvField(l.url),\n      escapeCsvField(l.domain ?? ''),\n      l.ip ?? '',\n      escapeCsvField(l.user_agent ?? ''),\n      escapeCsvField(l.referrer ?? ''),\n      l.request_method ?? '',\n    ].join(','),\n  );\n  return [header, ...rows].join('\\n');\n}\n","import type { StorageAdapter } from './repositories/index.js';\nimport type {\n  RedirectForgeConfig,\n  HttpRequest,\n  ContentItem,\n  ProcessResult,\n  Tenant,\n  TenantHost,\n  Group,\n  Redirect,\n  RedirectLog,\n  NotFoundLog,\n  RedirectStatus,\n  LogQuery,\n  LogGroupQuery,\n  LogGroupResult,\n  PaginatedResult,\n} from './types/index.js';\nimport { DEFAULT_CONFIG } from './types/index.js';\nimport type { ImportFormat, ImportResult } from './import/types.js';\nimport type { ExportFormat } from './export/types.js';\nimport type { ExpirationResult } from './operations/log-expiration.js';\nimport type { CreateRedirectInput, UpdateRedirectInput } from './operations/redirect-ops.js';\n\nimport { processRequest } from './engine/processor.js';\nimport { createTenant, suspendTenant, activateTenant } from './operations/tenant-ops.js';\nimport { addHost, removeHost, enableHost, disableHost } from './operations/host-ops.js';\nimport { createGroup, enableGroup, disableGroup, deleteGroup } from './operations/group-ops.js';\nimport {\n  createRedirect,\n  updateRedirect,\n  enableRedirect,\n  disableRedirect,\n  deleteRedirect,\n  resetRedirectHits,\n} from './operations/redirect-ops.js';\nimport {\n  bulkDeleteRedirects,\n  bulkSetRedirectStatus,\n  bulkDeleteRedirectLogs,\n  bulkDeleteNotFoundLogs,\n  deleteAllTenantRedirectLogs,\n  deleteAllTenantNotFoundLogs,\n} from './operations/bulk-ops.js';\nimport { handleContentUrlChange } from './operations/content-monitor.js';\nimport { expireLogs } from './operations/log-expiration.js';\nimport { importRedirects } from './import/importer.js';\nimport { exportRedirects, exportRedirectLogsAsCsv, exportNotFoundLogsAsCsv } from './export/exporter.js';\n\nexport interface RedirectForgeOptions {\n  storage: StorageAdapter;\n  config?: Partial<RedirectForgeConfig>;\n}\n\nexport class RedirectForge {\n  private storage: StorageAdapter;\n  private config: RedirectForgeConfig;\n\n  constructor(options: RedirectForgeOptions) {\n    this.storage = options.storage;\n    this.config = { ...DEFAULT_CONFIG, ...options.config };\n    // Ensure monitor_content_types is a Set even if overridden with one\n    if (options.config?.monitor_content_types) {\n      this.config.monitor_content_types = new Set(options.config.monitor_content_types);\n    }\n  }\n\n  // --- Request Processing ---\n\n  processRequest(request: HttpRequest): Promise<ProcessResult> {\n    return processRequest(this.storage, this.config, request);\n  }\n\n  // --- Tenant Lifecycle ---\n\n  createTenant(name: string): Promise<Tenant> {\n    return createTenant(this.storage, name);\n  }\n\n  suspendTenant(tenantId: string): Promise<Tenant> {\n    return suspendTenant(this.storage, tenantId);\n  }\n\n  activateTenant(tenantId: string): Promise<Tenant> {\n    return activateTenant(this.storage, tenantId);\n  }\n\n  // --- Host Management ---\n\n  addHost(tenantId: string, hostname: string, environment?: string): Promise<TenantHost> {\n    return addHost(this.storage, tenantId, hostname, environment);\n  }\n\n  removeHost(hostId: string): Promise<void> {\n    return removeHost(this.storage, hostId);\n  }\n\n  enableHost(hostId: string): Promise<TenantHost> {\n    return enableHost(this.storage, hostId);\n  }\n\n  disableHost(hostId: string): Promise<TenantHost> {\n    return disableHost(this.storage, hostId);\n  }\n\n  // --- Group Management ---\n\n  createGroup(tenantId: string, name: string): Promise<Group> {\n    return createGroup(this.storage, tenantId, name);\n  }\n\n  enableGroup(groupId: string): Promise<Group> {\n    return enableGroup(this.storage, groupId);\n  }\n\n  disableGroup(groupId: string): Promise<Group> {\n    return disableGroup(this.storage, groupId);\n  }\n\n  deleteGroup(groupId: string): Promise<void> {\n    return deleteGroup(this.storage, groupId);\n  }\n\n  // --- Redirect Management ---\n\n  createRedirect(input: CreateRedirectInput): Promise<Redirect> {\n    return createRedirect(this.storage, input);\n  }\n\n  updateRedirect(redirectId: string, input: UpdateRedirectInput): Promise<Redirect> {\n    return updateRedirect(this.storage, redirectId, input);\n  }\n\n  enableRedirect(redirectId: string): Promise<Redirect> {\n    return enableRedirect(this.storage, redirectId);\n  }\n\n  disableRedirect(redirectId: string): Promise<Redirect> {\n    return disableRedirect(this.storage, redirectId);\n  }\n\n  deleteRedirect(redirectId: string): Promise<void> {\n    return deleteRedirect(this.storage, redirectId);\n  }\n\n  resetRedirectHits(redirectId: string): Promise<void> {\n    return resetRedirectHits(this.storage, redirectId);\n  }\n\n  // --- Bulk Operations ---\n\n  bulkDeleteRedirects(ids: string[]): Promise<void> {\n    return bulkDeleteRedirects(this.storage, ids);\n  }\n\n  bulkSetRedirectStatus(ids: string[], status: RedirectStatus): Promise<void> {\n    return bulkSetRedirectStatus(this.storage, ids, status);\n  }\n\n  bulkDeleteRedirectLogs(ids: string[]): Promise<void> {\n    return bulkDeleteRedirectLogs(this.storage, ids);\n  }\n\n  bulkDeleteNotFoundLogs(ids: string[]): Promise<void> {\n    return bulkDeleteNotFoundLogs(this.storage, ids);\n  }\n\n  deleteAllTenantRedirectLogs(tenantId: string): Promise<void> {\n    return deleteAllTenantRedirectLogs(this.storage, tenantId);\n  }\n\n  deleteAllTenantNotFoundLogs(tenantId: string): Promise<void> {\n    return deleteAllTenantNotFoundLogs(this.storage, tenantId);\n  }\n\n  // --- Log Queries ---\n\n  queryRedirectLogs(query: LogQuery): Promise<PaginatedResult<RedirectLog>> {\n    return this.storage.redirectLogs.query(query);\n  }\n\n  groupRedirectLogs(query: LogGroupQuery): Promise<PaginatedResult<LogGroupResult>> {\n    return this.storage.redirectLogs.groupBy(query);\n  }\n\n  queryNotFoundLogs(query: LogQuery): Promise<PaginatedResult<NotFoundLog>> {\n    return this.storage.notFoundLogs.query(query);\n  }\n\n  groupNotFoundLogs(query: LogGroupQuery): Promise<PaginatedResult<LogGroupResult>> {\n    return this.storage.notFoundLogs.groupBy(query);\n  }\n\n  // --- Log Expiration ---\n\n  expireLogs(): Promise<ExpirationResult> {\n    return expireLogs(this.storage, this.config);\n  }\n\n  // --- Content Monitoring ---\n\n  handleContentUrlChange(tenantId: string, targetGroupId: string, item: ContentItem): Promise<Redirect | null> {\n    return handleContentUrlChange(this.storage, this.config, tenantId, targetGroupId, item);\n  }\n\n  // --- Import/Export ---\n\n  importRedirects(sourceData: string, format: ImportFormat, targetGroupId: string): Promise<ImportResult> {\n    return importRedirects(this.storage, sourceData, format, targetGroupId);\n  }\n\n  exportRedirects(redirects: Redirect[], format: ExportFormat): string {\n    return exportRedirects(redirects, format);\n  }\n\n  exportRedirectLogsAsCsv(logs: RedirectLog[]): string {\n    return exportRedirectLogsAsCsv(logs);\n  }\n\n  exportNotFoundLogsAsCsv(logs: NotFoundLog[]): string {\n    return exportNotFoundLogsAsCsv(logs);\n  }\n}\n","import type { Tenant } from '../types/index.js';\nimport type { TenantRepository } from '../repositories/index.js';\n\nexport class MemoryTenantRepository implements TenantRepository {\n  private store = new Map<string, Tenant>();\n  private nextId = 1;\n\n  async findById(id: string): Promise<Tenant | undefined> {\n    return this.store.get(id);\n  }\n\n  async findAll(): Promise<Tenant[]> {\n    return [...this.store.values()];\n  }\n\n  async create(data: Omit<Tenant, 'id'>): Promise<Tenant> {\n    const id = String(this.nextId++);\n    const tenant: Tenant = { id, ...data };\n    this.store.set(id, tenant);\n    return tenant;\n  }\n\n  async update(id: string, data: Partial<Omit<Tenant, 'id'>>): Promise<Tenant> {\n    const existing = this.store.get(id);\n    if (!existing) throw new Error(`Tenant not found: ${id}`);\n    const updated = { ...existing, ...data };\n    this.store.set(id, updated);\n    return updated;\n  }\n\n  async delete(id: string): Promise<void> {\n    this.store.delete(id);\n  }\n}\n","import type { TenantHost } from '../types/index.js';\nimport type { TenantHostRepository } from '../repositories/index.js';\n\nexport class MemoryTenantHostRepository implements TenantHostRepository {\n  private store = new Map<string, TenantHost>();\n  private nextId = 1;\n\n  async findById(id: string): Promise<TenantHost | undefined> {\n    return this.store.get(id);\n  }\n\n  async findByHostname(hostname: string): Promise<TenantHost | undefined> {\n    for (const host of this.store.values()) {\n      if (host.hostname === hostname) return host;\n    }\n    return undefined;\n  }\n\n  async findByTenantId(tenantId: string): Promise<TenantHost[]> {\n    return [...this.store.values()].filter((h) => h.tenant_id === tenantId);\n  }\n\n  async create(data: Omit<TenantHost, 'id'>): Promise<TenantHost> {\n    const id = String(this.nextId++);\n    const host: TenantHost = { id, ...data };\n    this.store.set(id, host);\n    return host;\n  }\n\n  async update(id: string, data: Partial<Omit<TenantHost, 'id'>>): Promise<TenantHost> {\n    const existing = this.store.get(id);\n    if (!existing) throw new Error(`TenantHost not found: ${id}`);\n    const updated = { ...existing, ...data };\n    this.store.set(id, updated);\n    return updated;\n  }\n\n  async delete(id: string): Promise<void> {\n    this.store.delete(id);\n  }\n}\n","import type { Group } from '../types/index.js';\nimport type { GroupRepository } from '../repositories/index.js';\n\nexport class MemoryGroupRepository implements GroupRepository {\n  private store = new Map<string, Group>();\n  private nextId = 1;\n\n  async findById(id: string): Promise<Group | undefined> {\n    return this.store.get(id);\n  }\n\n  async findByTenantId(tenantId: string): Promise<Group[]> {\n    return [...this.store.values()]\n      .filter((g) => g.tenant_id === tenantId)\n      .sort((a, b) => a.position - b.position);\n  }\n\n  async create(data: Omit<Group, 'id'>): Promise<Group> {\n    const id = String(this.nextId++);\n    const group: Group = { id, ...data };\n    this.store.set(id, group);\n    return group;\n  }\n\n  async update(id: string, data: Partial<Omit<Group, 'id'>>): Promise<Group> {\n    const existing = this.store.get(id);\n    if (!existing) throw new Error(`Group not found: ${id}`);\n    const updated = { ...existing, ...data };\n    this.store.set(id, updated);\n    return updated;\n  }\n\n  async delete(id: string): Promise<void> {\n    this.store.delete(id);\n  }\n\n  async countByTenantId(tenantId: string): Promise<number> {\n    return [...this.store.values()].filter((g) => g.tenant_id === tenantId).length;\n  }\n}\n","import type { Redirect } from '../types/index.js';\nimport type { RedirectRepository, RedirectWithGroupPosition } from '../repositories/index.js';\nimport type { GroupRepository } from '../repositories/index.js';\n\nexport class MemoryRedirectRepository implements RedirectRepository {\n  private store = new Map<string, Redirect>();\n  private nextId = 1;\n  private groupRepo: GroupRepository;\n\n  constructor(groupRepo: GroupRepository) {\n    this.groupRepo = groupRepo;\n  }\n\n  async findById(id: string): Promise<Redirect | undefined> {\n    return this.store.get(id);\n  }\n\n  async findByGroupId(groupId: string): Promise<Redirect[]> {\n    return [...this.store.values()]\n      .filter((r) => r.group_id === groupId)\n      .sort((a, b) => a.position - b.position);\n  }\n\n  async findActiveByTenantId(tenantId: string): Promise<RedirectWithGroupPosition[]> {\n    const groups = await this.groupRepo.findByTenantId(tenantId);\n    const activeGroupIds = new Map<string, number>();\n    for (const g of groups) {\n      if (g.status === 'enabled') {\n        activeGroupIds.set(g.id, g.position);\n      }\n    }\n\n    const results: RedirectWithGroupPosition[] = [];\n    for (const r of this.store.values()) {\n      if (r.status === 'enabled' && activeGroupIds.has(r.group_id)) {\n        results.push({\n          ...r,\n          group_position: activeGroupIds.get(r.group_id)!,\n        });\n      }\n    }\n\n    return results.sort(\n      (a, b) => a.group_position - b.group_position || a.position - b.position,\n    );\n  }\n\n  async create(data: Omit<Redirect, 'id'>): Promise<Redirect> {\n    const id = String(this.nextId++);\n    const redirect: Redirect = { id, ...data };\n    this.store.set(id, redirect);\n    return redirect;\n  }\n\n  async createMany(data: Omit<Redirect, 'id'>[]): Promise<Redirect[]> {\n    return Promise.all(data.map((d) => this.create(d)));\n  }\n\n  async update(id: string, data: Partial<Omit<Redirect, 'id'>>): Promise<Redirect> {\n    const existing = this.store.get(id);\n    if (!existing) throw new Error(`Redirect not found: ${id}`);\n    const updated = { ...existing, ...data };\n    this.store.set(id, updated);\n    return updated;\n  }\n\n  async updateManyStatus(ids: string[], status: Redirect['status']): Promise<void> {\n    for (const id of ids) {\n      const existing = this.store.get(id);\n      if (existing) {\n        this.store.set(id, { ...existing, status });\n      }\n    }\n  }\n\n  async delete(id: string): Promise<void> {\n    this.store.delete(id);\n  }\n\n  async deleteMany(ids: string[]): Promise<void> {\n    for (const id of ids) {\n      this.store.delete(id);\n    }\n  }\n\n  async deleteByGroupId(groupId: string): Promise<void> {\n    for (const [id, r] of this.store) {\n      if (r.group_id === groupId) this.store.delete(id);\n    }\n  }\n\n  async incrementHitCount(id: string, lastHitAt: Date): Promise<void> {\n    const existing = this.store.get(id);\n    if (!existing) return;\n    this.store.set(id, {\n      ...existing,\n      hit_count: existing.hit_count + 1,\n      last_hit_at: lastHitAt,\n    });\n  }\n\n  async resetHitCount(id: string): Promise<void> {\n    const existing = this.store.get(id);\n    if (!existing) return;\n    this.store.set(id, {\n      ...existing,\n      hit_count: 0,\n      last_hit_at: undefined,\n    });\n  }\n\n  async countByGroupId(groupId: string): Promise<number> {\n    return [...this.store.values()].filter((r) => r.group_id === groupId).length;\n  }\n}\n","import type { LogFilter, LogQuery, LogGroupQuery, LogGroupResult, PaginatedResult } from '../types/index.js';\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction getField(record: any, field: string): unknown {\n  return record[field];\n}\n\nfunction matchesFilter(record: unknown, filter: LogFilter): boolean {\n  const actual = getField(record, filter.field);\n  const expected = filter.value;\n\n  switch (filter.operator) {\n    case 'eq':\n      return actual === expected;\n    case 'neq':\n      return actual !== expected;\n    case 'contains':\n      return typeof actual === 'string' && typeof expected === 'string'\n        ? actual.toLowerCase().includes(expected.toLowerCase())\n        : false;\n    case 'not_contains':\n      return typeof actual === 'string' && typeof expected === 'string'\n        ? !actual.toLowerCase().includes(expected.toLowerCase())\n        : true;\n    case 'gt':\n      if (actual instanceof Date && expected instanceof Date) return actual > expected;\n      return (actual as number) > (expected as number);\n    case 'gte':\n      if (actual instanceof Date && expected instanceof Date) return actual >= expected;\n      return (actual as number) >= (expected as number);\n    case 'lt':\n      if (actual instanceof Date && expected instanceof Date) return actual < expected;\n      return (actual as number) < (expected as number);\n    case 'lte':\n      if (actual instanceof Date && expected instanceof Date) return actual <= expected;\n      return (actual as number) <= (expected as number);\n    default:\n      return true;\n  }\n}\n\nfunction applyFilters<T>(items: T[], filters?: LogFilter[]): T[] {\n  if (!filters || filters.length === 0) return items;\n  return items.filter((item) => filters.every((f) => matchesFilter(item, f)));\n}\n\nfunction applySort<T>(items: T[], sortBy?: string, sortDir?: 'asc' | 'desc'): T[] {\n  if (!sortBy) return items;\n  const dir = sortDir === 'asc' ? 1 : -1;\n  return [...items].sort((a, b) => {\n    const va = getField(a, sortBy);\n    const vb = getField(b, sortBy);\n    if (va instanceof Date && vb instanceof Date) return (va.getTime() - vb.getTime()) * dir;\n    if (typeof va === 'string' && typeof vb === 'string') return va.localeCompare(vb) * dir;\n    if (typeof va === 'number' && typeof vb === 'number') return (va - vb) * dir;\n    return 0;\n  });\n}\n\nexport function paginate<T>(items: T[], page?: number, perPage?: number): PaginatedResult<T> {\n  const p = Math.max(1, page ?? 1);\n  const pp = Math.max(1, perPage ?? 50);\n  const total = items.length;\n  const totalPages = Math.max(1, Math.ceil(total / pp));\n  const start = (p - 1) * pp;\n  return {\n    items: items.slice(start, start + pp),\n    total,\n    page: p,\n    per_page: pp,\n    total_pages: totalPages,\n  };\n}\n\nexport function queryItems<T>(\n  allItems: T[],\n  tenantIdField: string,\n  query: LogQuery,\n): PaginatedResult<T> {\n  let items = allItems.filter((i) => getField(i, tenantIdField) === query.tenant_id);\n  items = applyFilters(items, query.filters);\n  items = applySort(items, query.sort_by ?? 'created_at', query.sort_dir ?? 'desc');\n  return paginate(items, query.page, query.per_page);\n}\n\nexport function groupItems<T>(\n  allItems: T[],\n  tenantIdField: string,\n  query: LogGroupQuery,\n): PaginatedResult<LogGroupResult> {\n  let items = allItems.filter((i) => getField(i, tenantIdField) === query.tenant_id);\n  items = applyFilters(items, query.filters);\n\n  const counts = new Map<string, number>();\n  for (const item of items) {\n    const val = String(getField(item, query.group_by) ?? '');\n    counts.set(val, (counts.get(val) ?? 0) + 1);\n  }\n\n  let results: LogGroupResult[] = [...counts.entries()].map(([value, count]) => ({ value, count }));\n\n  if (query.sort_by === 'field') {\n    const dir = query.sort_dir === 'asc' ? 1 : -1;\n    results.sort((a, b) => a.value.localeCompare(b.value) * dir);\n  } else {\n    const dir = query.sort_dir === 'asc' ? 1 : -1;\n    results.sort((a, b) => (a.count - b.count) * dir);\n  }\n\n  return paginate(results, query.page, query.per_page);\n}\n","import type { RedirectLog, LogQuery, LogGroupQuery, LogGroupResult, PaginatedResult } from '../types/index.js';\nimport type { RedirectLogRepository } from '../repositories/index.js';\nimport { queryItems, groupItems } from './log-query-helpers.js';\n\nexport class MemoryRedirectLogRepository implements RedirectLogRepository {\n  private store = new Map<string, RedirectLog>();\n  private nextId = 1;\n\n  async create(data: Omit<RedirectLog, 'id'>): Promise<RedirectLog> {\n    const id = String(this.nextId++);\n    const log: RedirectLog = { id, ...data };\n    this.store.set(id, log);\n    return log;\n  }\n\n  async query(query: LogQuery): Promise<PaginatedResult<RedirectLog>> {\n    return queryItems([...this.store.values()], 'tenant_id', query);\n  }\n\n  async groupBy(query: LogGroupQuery): Promise<PaginatedResult<LogGroupResult>> {\n    return groupItems([...this.store.values()], 'tenant_id', query);\n  }\n\n  async deleteMany(ids: string[]): Promise<void> {\n    for (const id of ids) this.store.delete(id);\n  }\n\n  async deleteByTenantId(tenantId: string): Promise<void> {\n    for (const [id, log] of this.store) {\n      if (log.tenant_id === tenantId) this.store.delete(id);\n    }\n  }\n\n  async deleteExpiredBatch(cutoff: Date, batchSize: number): Promise<{ deleted: number; hasMore: boolean }> {\n    const expired: string[] = [];\n    for (const [id, log] of this.store) {\n      if (log.created_at < cutoff) expired.push(id);\n    }\n    const toDelete = expired.slice(0, batchSize);\n    for (const id of toDelete) this.store.delete(id);\n    return { deleted: toDelete.length, hasMore: expired.length > batchSize };\n  }\n\n  async countExpired(cutoff: Date): Promise<number> {\n    let count = 0;\n    for (const log of this.store.values()) {\n      if (log.created_at < cutoff) count++;\n    }\n    return count;\n  }\n}\n","import type { NotFoundLog, LogQuery, LogGroupQuery, LogGroupResult, PaginatedResult } from '../types/index.js';\nimport type { NotFoundLogRepository } from '../repositories/index.js';\nimport { queryItems, groupItems } from './log-query-helpers.js';\n\nexport class MemoryNotFoundLogRepository implements NotFoundLogRepository {\n  private store = new Map<string, NotFoundLog>();\n  private nextId = 1;\n\n  async create(data: Omit<NotFoundLog, 'id'>): Promise<NotFoundLog> {\n    const id = String(this.nextId++);\n    const log: NotFoundLog = { id, ...data };\n    this.store.set(id, log);\n    return log;\n  }\n\n  async query(query: LogQuery): Promise<PaginatedResult<NotFoundLog>> {\n    return queryItems([...this.store.values()], 'tenant_id', query);\n  }\n\n  async groupBy(query: LogGroupQuery): Promise<PaginatedResult<LogGroupResult>> {\n    return groupItems([...this.store.values()], 'tenant_id', query);\n  }\n\n  async deleteMany(ids: string[]): Promise<void> {\n    for (const id of ids) this.store.delete(id);\n  }\n\n  async deleteByTenantId(tenantId: string): Promise<void> {\n    for (const [id, log] of this.store) {\n      if (log.tenant_id === tenantId) this.store.delete(id);\n    }\n  }\n\n  async deleteExpiredBatch(cutoff: Date, batchSize: number): Promise<{ deleted: number; hasMore: boolean }> {\n    const expired: string[] = [];\n    for (const [id, log] of this.store) {\n      if (log.created_at < cutoff) expired.push(id);\n    }\n    const toDelete = expired.slice(0, batchSize);\n    for (const id of toDelete) this.store.delete(id);\n    return { deleted: toDelete.length, hasMore: expired.length > batchSize };\n  }\n\n  async countExpired(cutoff: Date): Promise<number> {\n    let count = 0;\n    for (const log of this.store.values()) {\n      if (log.created_at < cutoff) count++;\n    }\n    return count;\n  }\n}\n","import type { StorageAdapter } from '../repositories/index.js';\nimport { MemoryTenantRepository } from './memory-tenant.repository.js';\nimport { MemoryTenantHostRepository } from './memory-tenant-host.repository.js';\nimport { MemoryGroupRepository } from './memory-group.repository.js';\nimport { MemoryRedirectRepository } from './memory-redirect.repository.js';\nimport { MemoryRedirectLogRepository } from './memory-redirect-log.repository.js';\nimport { MemoryNotFoundLogRepository } from './memory-not-found-log.repository.js';\n\nexport function createMemoryStorage(): StorageAdapter {\n  const groups = new MemoryGroupRepository();\n  return {\n    tenants: new MemoryTenantRepository(),\n    tenantHosts: new MemoryTenantHostRepository(),\n    groups,\n    redirects: new MemoryRedirectRepository(groups),\n    redirectLogs: new MemoryRedirectLogRepository(),\n    notFoundLogs: new MemoryNotFoundLogRepository(),\n  };\n}\n"],"mappings":"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","names":[]}