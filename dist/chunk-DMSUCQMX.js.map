{"version":3,"sources":["../src/types/enums.ts","../src/types/config.ts","../src/types/errors.ts"],"sourcesContent":["export const RedirectStatus = {\n  enabled: 'enabled',\n  disabled: 'disabled',\n} as const;\nexport type RedirectStatus = (typeof RedirectStatus)[keyof typeof RedirectStatus];\n\nexport const TenantStatus = {\n  active: 'active',\n  suspended: 'suspended',\n} as const;\nexport type TenantStatus = (typeof TenantStatus)[keyof typeof TenantStatus];\n\nexport const QueryHandling = {\n  ignore: 'ignore',\n  exact: 'exact',\n  pass: 'pass',\n  exact_order: 'exact_order',\n} as const;\nexport type QueryHandling = (typeof QueryHandling)[keyof typeof QueryHandling];\n\nexport const MatchType = {\n  url: 'url',\n  ip: 'ip',\n  user_agent: 'user_agent',\n  referrer: 'referrer',\n  login_status: 'login_status',\n  header: 'header',\n  cookie: 'cookie',\n  role: 'role',\n  server_variable: 'server_variable',\n  language: 'language',\n} as const;\nexport type MatchType = (typeof MatchType)[keyof typeof MatchType];\n\nexport const ActionType = {\n  redirect: 'redirect',\n  error: 'error',\n  nothing: 'nothing',\n  rewrite: 'rewrite',\n  random: 'random',\n} as const;\nexport type ActionType = (typeof ActionType)[keyof typeof ActionType];\n\nexport const IpLogging = {\n  full: 'full',\n  anonymized: 'anonymized',\n  none: 'none',\n} as const;\nexport type IpLogging = (typeof IpLogging)[keyof typeof IpLogging];\n","import type { IpLogging } from './enums.js';\n\nexport interface RedirectForgeConfig {\n  redirect_log_retention_days: number;\n  not_found_log_retention_days: number;\n  track_hits: boolean;\n  log_request_headers: boolean;\n  ip_logging: IpLogging;\n  ip_header_priority: string[];\n  trusted_proxy_ranges: string[];\n  log_cleanup_batch_size: number;\n  aggressive_cleanup_threshold: number;\n  aggressive_cleanup_batch_size: number;\n  monitor_content_types: Set<string>;\n}\n\nexport const DEFAULT_CONFIG: RedirectForgeConfig = {\n  redirect_log_retention_days: 0,\n  not_found_log_retention_days: 0,\n  track_hits: true,\n  log_request_headers: false,\n  ip_logging: 'full',\n  ip_header_priority: ['X-Forwarded-For'],\n  trusted_proxy_ranges: [],\n  log_cleanup_batch_size: 20_000,\n  aggressive_cleanup_threshold: 100_000,\n  aggressive_cleanup_batch_size: 50_000,\n  monitor_content_types: new Set(),\n};\n","export class RedirectForgeError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = 'RedirectForgeError';\n  }\n}\n\nexport class NotFoundError extends RedirectForgeError {\n  constructor(entity: string, id: string) {\n    super(`${entity} not found: ${id}`);\n    this.name = 'NotFoundError';\n  }\n}\n\nexport class PreconditionError extends RedirectForgeError {\n  constructor(message: string) {\n    super(message);\n    this.name = 'PreconditionError';\n  }\n}\n\nexport class ValidationError extends RedirectForgeError {\n  public readonly field?: string;\n\n  constructor(message: string, field?: string) {\n    super(message);\n    this.name = 'ValidationError';\n    this.field = field;\n  }\n}\n"],"mappings":";AAAO,IAAM,iBAAiB;AAAA,EAC5B,SAAS;AAAA,EACT,UAAU;AACZ;AAGO,IAAM,eAAe;AAAA,EAC1B,QAAQ;AAAA,EACR,WAAW;AACb;AAGO,IAAM,gBAAgB;AAAA,EAC3B,QAAQ;AAAA,EACR,OAAO;AAAA,EACP,MAAM;AAAA,EACN,aAAa;AACf;AAGO,IAAM,YAAY;AAAA,EACvB,KAAK;AAAA,EACL,IAAI;AAAA,EACJ,YAAY;AAAA,EACZ,UAAU;AAAA,EACV,cAAc;AAAA,EACd,QAAQ;AAAA,EACR,QAAQ;AAAA,EACR,MAAM;AAAA,EACN,iBAAiB;AAAA,EACjB,UAAU;AACZ;AAGO,IAAM,aAAa;AAAA,EACxB,UAAU;AAAA,EACV,OAAO;AAAA,EACP,SAAS;AAAA,EACT,SAAS;AAAA,EACT,QAAQ;AACV;AAGO,IAAM,YAAY;AAAA,EACvB,MAAM;AAAA,EACN,YAAY;AAAA,EACZ,MAAM;AACR;;;AC/BO,IAAM,iBAAsC;AAAA,EACjD,6BAA6B;AAAA,EAC7B,8BAA8B;AAAA,EAC9B,YAAY;AAAA,EACZ,qBAAqB;AAAA,EACrB,YAAY;AAAA,EACZ,oBAAoB,CAAC,iBAAiB;AAAA,EACtC,sBAAsB,CAAC;AAAA,EACvB,wBAAwB;AAAA,EACxB,8BAA8B;AAAA,EAC9B,+BAA+B;AAAA,EAC/B,uBAAuB,oBAAI,IAAI;AACjC;;;AC5BO,IAAM,qBAAN,cAAiC,MAAM;AAAA,EAC5C,YAAY,SAAiB;AAC3B,UAAM,OAAO;AACb,SAAK,OAAO;AAAA,EACd;AACF;AAEO,IAAM,gBAAN,cAA4B,mBAAmB;AAAA,EACpD,YAAY,QAAgB,IAAY;AACtC,UAAM,GAAG,MAAM,eAAe,EAAE,EAAE;AAClC,SAAK,OAAO;AAAA,EACd;AACF;AAEO,IAAM,oBAAN,cAAgC,mBAAmB;AAAA,EACxD,YAAY,SAAiB;AAC3B,UAAM,OAAO;AACb,SAAK,OAAO;AAAA,EACd;AACF;AAEO,IAAM,kBAAN,cAA8B,mBAAmB;AAAA,EACtC;AAAA,EAEhB,YAAY,SAAiB,OAAgB;AAC3C,UAAM,OAAO;AACb,SAAK,OAAO;AACZ,SAAK,QAAQ;AAAA,EACf;AACF;","names":[]}